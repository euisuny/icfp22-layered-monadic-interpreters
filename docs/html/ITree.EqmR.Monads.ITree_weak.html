<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="../">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">ITree.EqmR.Monads.ITree_weak</h1>

<div class="code">
</div>

<div class="doc">
*EqmR-related laws for the itree monad with weak bisimulation. 
</div>
<div class="code">
<span class="comment">(*&nbsp;This&nbsp;file&nbsp;provides&nbsp;the&nbsp;instances&nbsp;for&nbsp;eqmR-related&nbsp;laws&nbsp;for&nbsp;the&nbsp;itree&nbsp;monad<br/>
&nbsp;with&nbsp;weak&nbsp;bisimulation,&nbsp;<span class="inlinecode"><span class="id" title="var">eutt</span></span>.&nbsp;*)</span><br/>

<br/>

<br/>
#[<span class="id" title="var">global</span>]<br/>
<span class="id" title="keyword">Instance</span> <a id="EqmR_ITree" class="idref" href="#EqmR_ITree"><span class="id" title="instance">EqmR_ITree</span></a> {<a id="E:1" class="idref" href="#E:1"><span class="id" title="binder">E</span></a>} : <a class="idref" href="ITree.EqmR.EqmRMonad.html#EqmR"><span class="id" title="class">EqmR</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:1"><span class="id" title="variable">E</span></a>) := {| <a class="idref" href="ITree.EqmR.EqmRMonad.html#eqmR"><span class="id" title="method">eqmR</span></a> := (<span class="id" title="keyword">fun</span> <a id="a:2" class="idref" href="#a:2"><span class="id" title="binder">a</span></a> <a id="b:3" class="idref" href="#b:3"><span class="id" title="binder">b</span></a> =&gt; <a class="idref" href="ITree.Eq.Eq.html#eutt"><span class="id" title="definition">eutt</span></a>) |}.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="compose_rcompose_equiv" class="idref" href="#compose_rcompose_equiv"><span class="id" title="lemma">compose_rcompose_equiv</span></a> : <span class="id" title="keyword">forall</span> {<a id="A:4" class="idref" href="#A:4"><span class="id" title="binder">A</span></a> <a id="B:5" class="idref" href="#B:5"><span class="id" title="binder">B</span></a> <a id="C:6" class="idref" href="#C:6"><span class="id" title="binder">C</span></a>} (<a id="R1:7" class="idref" href="#R1:7"><span class="id" title="binder">R1</span></a> : <a class="idref" href="ITree.Basics.HeterogeneousRelations.html#relationH"><span class="id" title="definition">relationH</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#A:4"><span class="id" title="variable">A</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#B:5"><span class="id" title="variable">B</span></a>) (<a id="R2:8" class="idref" href="#R2:8"><span class="id" title="binder">R2</span></a> : <a class="idref" href="ITree.Basics.HeterogeneousRelations.html#relationH"><span class="id" title="definition">relationH</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#B:5"><span class="id" title="variable">B</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#C:6"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="ITree.Basics.HeterogeneousRelations.html#eq_rel"><span class="id" title="definition">eq_rel</span></a> (<a class="idref" href="ITree.Eq.Eq.html#rcompose"><span class="id" title="inductive">rcompose</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#R1:7"><span class="id" title="variable">R1</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#R2:8"><span class="id" title="variable">R2</span></a>) (<a class="idref" href="ITree.Basics.HeterogeneousRelations.html#rel_compose"><span class="id" title="definition">rel_compose</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#R2:8"><span class="id" title="variable">R2</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#R1:7"><span class="id" title="variable">R1</span></a>) .<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Program.Basics.html#compose"><span class="id" title="definition">compose</span></a>, <a class="idref" href="ITree.Basics.HeterogeneousRelations.html#subrelationH"><span class="id" title="definition">subrelationH</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">r2</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="var">edestruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (? &amp; ? &amp; ?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="var">eassumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>]<br/>
<span class="id" title="keyword">Instance</span> <a id="eqmR_conj_ITree" class="idref" href="#eqmR_conj_ITree"><span class="id" title="instance">eqmR_conj_ITree</span></a> {<a id="E:9" class="idref" href="#E:9"><span class="id" title="binder">E</span></a>}: <a class="idref" href="ITree.EqmR.EqmRMonad.html#RelConj"><span class="id" title="class">RelConj</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:9"><span class="id" title="variable">E</span></a>).<br/>
<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Eq.UpToTaus.html#eutt_conj"><span class="id" title="lemma">eutt_conj</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>]<br/>
<span class="id" title="keyword">Instance</span> <a id="itree_transport_PER_" class="idref" href="#itree_transport_PER_"><span class="id" title="instance">itree_transport_PER_</span></a> {<a id="E:10" class="idref" href="#E:10"><span class="id" title="binder">E</span></a>}: <a class="idref" href="ITree.EqmR.EqmRMonad.html#TransportPER"><span class="id" title="class">TransportPER</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:10"><span class="id" title="variable">E</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Basics.HeterogeneousRelations.html#SymmetricH"><span class="id" title="class">SymmetricH</span></a>, <a class="idref" href="ITree.Basics.HeterogeneousRelations.html#relationH"><span class="id" title="definition">relationH</span></a> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">red</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eq.html#Symmetric_eqit"><span class="id" title="instance">Symmetric_eqit</span></a>. <span class="id" title="tactic">red</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Basics.HeterogeneousRelations.html#TransitiveH"><span class="id" title="class">TransitiveH</span></a>, <a class="idref" href="ITree.Basics.HeterogeneousRelations.html#relationH"><span class="id" title="definition">relationH</span></a> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">red</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Eq.Eq.html#Transitive_eqit"><span class="id" title="instance">Transitive_eqit</span></a>. <span class="id" title="tactic">red</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>]<br/>
<span class="id" title="keyword">Instance</span> <a id="itree_rel_comp" class="idref" href="#itree_rel_comp"><span class="id" title="instance">itree_rel_comp</span></a> {<a id="E:11" class="idref" href="#E:11"><span class="id" title="binder">E</span></a>} : <a class="idref" href="ITree.EqmR.EqmRMonad.html#RelComp"><span class="id" title="class">RelComp</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:11"><span class="id" title="variable">E</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="tactic">until</span> <span class="id" title="var">C</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Eq.Eq.html#eutt"><span class="id" title="definition">eutt</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">R1</span> <span class="id" title="var">R2</span> <span class="id" title="var">ma</span> <span class="id" title="var">mb</span> <span class="id" title="var">mc</span> <span class="id" title="var">HR1</span> <span class="id" title="var">HR2</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> &lt;- <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#compose_rcompose_equiv"><span class="id" title="lemma">compose_rcompose_equiv</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Eq.Eq.html#eqit_trans"><span class="id" title="lemma">eqit_trans</span></a>; <span class="id" title="var">eassumption</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>]<br/>
<span class="id" title="keyword">Instance</span> <a id="itree_lift_transpose" class="idref" href="#itree_lift_transpose"><span class="id" title="instance">itree_lift_transpose</span></a> {<a id="E:12" class="idref" href="#E:12"><span class="id" title="binder">E</span></a>} : <a class="idref" href="ITree.EqmR.EqmRMonad.html#LiftTranspose"><span class="id" title="class">LiftTranspose</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:12"><span class="id" title="variable">E</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Basics.HeterogeneousRelations.html#eq_rel"><span class="id" title="definition">eq_rel</span></a>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="var">pcofix</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">H'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pstep</span>. <span class="id" title="tactic">red</span>. <span class="id" title="var">punfold</span> <span class="id" title="var">H'</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">x'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">b</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">y'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">H'</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">REL</span>. <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">REL</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">REL</span> <span class="id" title="var">v</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">REL</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">intuition</span>. <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHH'</span>. <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHH'</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="var">pcofix</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">H'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pstep</span>. <span class="id" title="tactic">red</span>. <span class="id" title="var">punfold</span> <span class="id" title="var">H'</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">x'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">b</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">y'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">H'</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">REL</span>. <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">intuition</span>. <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">REL</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">REL</span> <span class="id" title="var">v</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">REL</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHH'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>. <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHH'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>]<br/>
<span class="id" title="keyword">Instance</span> <a id="itree_eutt_Proper" class="idref" href="#itree_eutt_Proper"><span class="id" title="instance">itree_eutt_Proper</span></a> {<a id="E:13" class="idref" href="#E:13"><span class="id" title="binder">E</span></a>}:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="A:14" class="idref" href="#A:14"><span class="id" title="binder">A</span></a> <a id="B:15" class="idref" href="#B:15"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="ITree.Basics.HeterogeneousRelations.html#eq_rel"><span class="id" title="definition">eq_rel</span></a> (<span class="id" title="var">A</span> := <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#A:14"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">B</span> := <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#B:15"><span class="id" title="variable">B</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="ITree.Basics.HeterogeneousRelations.html#eq_rel"><span class="id" title="definition">eq_rel</span></a>) (<a class="idref" href="ITree.Eq.Eq.html#eutt"><span class="id" title="definition">eutt</span></a> (<span class="id" title="var">E</span> :=<a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:13"><span class="id" title="variable">E</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Basics.HeterogeneousRelations.html#eq_rel"><span class="id" title="definition">eq_rel</span></a>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="var">pcofix</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">H'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pstep</span>. <span class="id" title="tactic">red</span>. <span class="id" title="var">punfold</span> <span class="id" title="var">H'</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">x'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">b</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">y'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">H'</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">REL</span>. <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">REL</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">REL</span> <span class="id" title="var">v</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">REL</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">intuition</span>. <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHH'</span>. <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHH'</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="var">pcofix</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">H'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pstep</span>. <span class="id" title="tactic">red</span>. <span class="id" title="var">punfold</span> <span class="id" title="var">H'</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">x'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">b</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">y'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">H'</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">REL</span>. <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">intuition</span>. <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">REL</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">REL</span> <span class="id" title="var">v</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">REL</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHH'</span>. <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHH'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">eassumption</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>]<br/>
<span class="id" title="keyword">Instance</span> <a id="itree_eutt_Proper_mono" class="idref" href="#itree_eutt_Proper_mono"><span class="id" title="instance">itree_eutt_Proper_mono</span></a> {<a id="E:16" class="idref" href="#E:16"><span class="id" title="binder">E</span></a>}:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="A:17" class="idref" href="#A:17"><span class="id" title="binder">A</span></a> <a id="B:18" class="idref" href="#B:18"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="ITree.Basics.HeterogeneousRelations.html#subrelationH"><span class="id" title="definition">subrelationH</span></a> (<span class="id" title="var">A</span>:=<a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#A:17"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">B</span>:=<a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#B:18"><span class="id" title="variable">B</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="ITree.Basics.HeterogeneousRelations.html#subrelationH"><span class="id" title="definition">subrelationH</span></a> (<span class="id" title="var">B</span>:=<a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:16"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#B:18"><span class="id" title="variable">B</span></a>)) <a class="idref" href="ITree.Eq.Eq.html#eutt"><span class="id" title="definition">eutt</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span>. <span class="id" title="tactic">do</span> 3 <span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>. <span class="id" title="var">pcofix</span> <span class="id" title="var">CIH</span>. <span class="id" title="var">pstep</span>. <span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">sub</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="var">punfold</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">a'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">b</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">b'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">REL</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">REL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">REL</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">REL</span> <span class="id" title="var">v</span>). <span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">REL</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a id="Returns" class="idref" href="#Returns"><span class="id" title="inductive">Returns</span></a> {<a id="E:19" class="idref" href="#E:19"><span class="id" title="binder">E</span></a>} {<a id="A:20" class="idref" href="#A:20"><span class="id" title="binder">A</span></a>: <span class="id" title="keyword">Type</span>} (<a id="a:21" class="idref" href="#a:21"><span class="id" title="binder">a</span></a>: <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#A:20"><span class="id" title="variable">A</span></a>) : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <span class="id" title="var">E</span> <span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
| <a id="ReturnsRet" class="idref" href="#ReturnsRet"><span class="id" title="constructor">ReturnsRet</span></a>: <span class="id" title="keyword">forall</span> <a id="t:24" class="idref" href="#t:24"><span class="id" title="binder">t</span></a>, <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#t:24"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Eq.Eq.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a:21"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns:22"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a:21"><span class="id" title="variable">a</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#t:24"><span class="id" title="variable">t</span></a><br/>
| <a id="ReturnsTau" class="idref" href="#ReturnsTau"><span class="id" title="constructor">ReturnsTau</span></a>: <span class="id" title="keyword">forall</span> <a id="t:25" class="idref" href="#t:25"><span class="id" title="binder">t</span></a> <a id="u:26" class="idref" href="#u:26"><span class="id" title="binder">u</span></a>, <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#t:25"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Eq.Eq.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Tau"><span class="id" title="abbreviation">Tau</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#u:26"><span class="id" title="variable">u</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns:22"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a:21"><span class="id" title="variable">a</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#u:26"><span class="id" title="variable">u</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns:22"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a:21"><span class="id" title="variable">a</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#t:25"><span class="id" title="variable">t</span></a><br/>
| <a id="ReturnsVis" class="idref" href="#ReturnsVis"><span class="id" title="constructor">ReturnsVis</span></a>: <span class="id" title="keyword">forall</span> {<a id="X:27" class="idref" href="#X:27"><span class="id" title="binder">X</span></a>} (<a id="e:28" class="idref" href="#e:28"><span class="id" title="binder">e</span></a>: <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:19"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#X:27"><span class="id" title="variable">X</span></a>) (<a id="x:29" class="idref" href="#x:29"><span class="id" title="binder">x</span></a>: <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#X:27"><span class="id" title="variable">X</span></a>) <a id="t:30" class="idref" href="#t:30"><span class="id" title="binder">t</span></a> <a id="k:31" class="idref" href="#k:31"><span class="id" title="binder">k</span></a>, <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#t:30"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Eq.Eq.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#e:28"><span class="id" title="variable">e</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#k:31"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns:22"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a:21"><span class="id" title="variable">a</span></a> (<a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#k:31"><span class="id" title="variable">k</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#x:29"><span class="id" title="variable">x</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns:22"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a:21"><span class="id" title="variable">a</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#t:30"><span class="id" title="variable">t</span></a><br/>
.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="Returns_eutt" class="idref" href="#Returns_eutt"><span class="id" title="instance">Returns_eutt</span></a> {<a id="E:32" class="idref" href="#E:32"><span class="id" title="binder">E</span></a> <a id="A:33" class="idref" href="#A:33"><span class="id" title="binder">A</span></a>} <a id="a:34" class="idref" href="#a:34"><span class="id" title="binder">a</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="ITree.Eq.Eq.html#eutt"><span class="id" title="definition">eutt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#iff"><span class="id" title="definition">iff</span></a>) (@<a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:32"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#A:33"><span class="id" title="variable">A</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a:34"><span class="id" title="variable">a</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">HRet</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">revert</span> <span class="id" title="var">y</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">HRet</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span>, <span class="id" title="var">H0</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHHRet</span>, <a class="idref" href="ITree.Eq.Eq.html#eqit_inv_Tau_l"><span class="id" title="lemma">eqit_inv_Tau_l</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H0</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span> 3; [<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H0</span>, <span class="id" title="var">H</span>; <span class="id" title="tactic">reflexivity</span> | <span class="id" title="tactic">apply</span> <span class="id" title="var">IHHRet</span>; <span class="id" title="tactic">reflexivity</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="var">revert</span> <span class="id" title="var">x</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">HRet</span>; <span class="id" title="tactic">intros</span> ? <span class="id" title="var">EQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">EQ</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHHRet</span>, <a class="idref" href="ITree.Eq.Eq.html#eqit_inv_Tau_r"><span class="id" title="lemma">eqit_inv_Tau_r</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">EQ</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span> 3; [<span class="id" title="tactic">rewrite</span> <span class="id" title="var">EQ</span>, <span class="id" title="var">H</span>; <span class="id" title="tactic">reflexivity</span> | <span class="id" title="tactic">apply</span> <span class="id" title="var">IHHRet</span>; <span class="id" title="tactic">reflexivity</span>].<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Returns_Vis_sub" class="idref" href="#Returns_Vis_sub"><span class="id" title="lemma">Returns_Vis_sub</span></a> :  <span class="id" title="keyword">forall</span> {<a id="E:35" class="idref" href="#E:35"><span class="id" title="binder">E</span></a>} {<a id="R:36" class="idref" href="#R:36"><span class="id" title="binder">R</span></a>} <a id="X:37" class="idref" href="#X:37"><span class="id" title="binder">X</span></a> (<a id="e:38" class="idref" href="#e:38"><span class="id" title="binder">e</span></a> : <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:35"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#X:37"><span class="id" title="variable">X</span></a>) (<a id="k:39" class="idref" href="#k:39"><span class="id" title="binder">k</span></a> : <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#X:37"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:35"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#R:36"><span class="id" title="variable">R</span></a>) <a id="u:40" class="idref" href="#u:40"><span class="id" title="binder">u</span></a> <a id="x:41" class="idref" href="#x:41"><span class="id" title="binder">x</span></a>, <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#u:40"><span class="id" title="variable">u</span></a> (<a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#k:39"><span class="id" title="variable">k</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#x:41"><span class="id" title="variable">x</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#u:40"><span class="id" title="variable">u</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#e:38"><span class="id" title="variable">e</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#k:39"><span class="id" title="variable">k</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ReturnsVis"><span class="id" title="constructor">ReturnsVis</span></a>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Returns_ret_inv_" class="idref" href="#Returns_ret_inv_"><span class="id" title="lemma">Returns_ret_inv_</span></a> : <span class="id" title="keyword">forall</span> {<a id="E:42" class="idref" href="#E:42"><span class="id" title="binder">E</span></a>} <a id="A:43" class="idref" href="#A:43"><span class="id" title="binder">A</span></a> (<a id="a:44" class="idref" href="#a:44"><span class="id" title="binder">a</span></a> <a id="b:45" class="idref" href="#b:45"><span class="id" title="binder">b</span></a> : <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#A:43"><span class="id" title="variable">A</span></a>) (<a id="t:46" class="idref" href="#t:46"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:42"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#A:43"><span class="id" title="variable">A</span></a>), <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#t:46"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Eq.Eq.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Eq.Eq.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#b:45"><span class="id" title="variable">b</span></a><a class="idref" href="ITree.Eq.Eq.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a:44"><span class="id" title="variable">a</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#t:46"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a:44"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#b:45"><span class="id" title="variable">b</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">E</span> <span class="id" title="var">A</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">t</span> <span class="id" title="var">eq</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">b</span> <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">eq</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eq.html#eqit_Ret"><span class="id" title="lemma">Eq.eqit_Ret</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">eq</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHReturns</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">eq</span>. <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">eq</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eq.html#eqit_inv"><span class="id" title="lemma">eqit_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">eq</span>. <span class="id" title="var">inv</span> <span class="id" title="var">eq</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Returns_ret_inv" class="idref" href="#Returns_ret_inv"><span class="id" title="lemma">Returns_ret_inv</span></a> :  <span class="id" title="keyword">forall</span> {<a id="E:47" class="idref" href="#E:47"><span class="id" title="binder">E</span></a>} <a id="A:48" class="idref" href="#A:48"><span class="id" title="binder">A</span></a> (<a id="a:49" class="idref" href="#a:49"><span class="id" title="binder">a</span></a> <a id="b:50" class="idref" href="#b:50"><span class="id" title="binder">b</span></a> : <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#A:48"><span class="id" title="variable">A</span></a>), <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a:49"><span class="id" title="variable">a</span></a> ((<span class="id" title="method">ret</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#b:50"><span class="id" title="variable">b</span></a>) : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:47"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#A:48"><span class="id" title="variable">A</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a:49"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#b:50"><span class="id" title="variable">b</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns_ret_inv_"><span class="id" title="lemma">Returns_ret_inv_</span></a>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="eutt_Returns_" class="idref" href="#eutt_Returns_"><span class="id" title="lemma">eutt_Returns_</span></a> : <span class="id" title="keyword">forall</span> {<a id="E:51" class="idref" href="#E:51"><span class="id" title="binder">E</span></a>} {<a id="R:52" class="idref" href="#R:52"><span class="id" title="binder">R</span></a>} (<a id="RR:53" class="idref" href="#RR:53"><span class="id" title="binder">RR</span></a> : <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#R:52"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>) (<a id="ta:54" class="idref" href="#ta:54"><span class="id" title="binder">ta</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:51"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#R:52"><span class="id" title="variable">R</span></a>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="IN:56" class="idref" href="#IN:56"><span class="id" title="binder">IN</span></a>: <span class="id" title="keyword">forall</span> (<a id="a:55" class="idref" href="#a:55"><span class="id" title="binder">a</span></a> : <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#R:52"><span class="id" title="variable">R</span></a>), <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a:55"><span class="id" title="variable">a</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ta:54"><span class="id" title="variable">ta</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#RR:53"><span class="id" title="variable">RR</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a:55"><span class="id" title="variable">a</span></a>), <a class="idref" href="ITree.Eq.Eq.html#eutt"><span class="id" title="definition">eutt</span></a> (<span class="id" title="keyword">fun</span> <a id="u1:57" class="idref" href="#u1:57"><span class="id" title="binder">u1</span></a> <a id="u2:58" class="idref" href="#u2:58"><span class="id" title="binder">u2</span></a> =&gt; <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#u1:57"><span class="id" title="variable">u1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#u2:58"><span class="id" title="variable">u2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#RR:53"><span class="id" title="variable">RR</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#u1:57"><span class="id" title="variable">u1</span></a>) <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ta:54"><span class="id" title="variable">ta</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ta:54"><span class="id" title="variable">ta</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">E</span> <span class="id" title="var">R</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">ginit</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">gcofix</span> <span class="id" title="var">CIH</span>; <span class="id" title="tactic">intros</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> (<a class="idref" href="ITree.Eq.Eq.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a> <span class="id" title="var">ta</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">IN</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">gstep</span>. <span class="id" title="tactic">red</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">ta</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">econstructor</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IN</span>. <span class="id" title="tactic">econstructor</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">econstructor</span>. <span class="id" title="var">gfinal</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IN</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">econstructor</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">gfinal</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IN</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns_Vis_sub"><span class="id" title="lemma">Returns_Vis_sub</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="eutt_Returns2_" class="idref" href="#eutt_Returns2_"><span class="id" title="lemma">eutt_Returns2_</span></a> : <span class="id" title="keyword">forall</span> {<a id="E:59" class="idref" href="#E:59"><span class="id" title="binder">E</span></a>} {<a id="R':60" class="idref" href="#R':60"><span class="id" title="binder">R'</span></a> <a id="R:61" class="idref" href="#R:61"><span class="id" title="binder">R</span></a>} (<a id="RR:62" class="idref" href="#RR:62"><span class="id" title="binder">RR</span></a> : <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#R:61"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>) (<a id="RR':63" class="idref" href="#RR':63"><span class="id" title="binder">RR'</span></a> : <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#R':60"><span class="id" title="variable">R'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>) (<a id="ta:64" class="idref" href="#ta:64"><span class="id" title="binder">ta</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:59"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#R:61"><span class="id" title="variable">R</span></a>) (<a id="ta':65" class="idref" href="#ta':65"><span class="id" title="binder">ta'</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:59"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#R':60"><span class="id" title="variable">R'</span></a>) <a id="RU:66" class="idref" href="#RU:66"><span class="id" title="binder">RU</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="IN1:68" class="idref" href="#IN1:68"><span class="id" title="binder">IN1</span></a>: <span class="id" title="keyword">forall</span> (<a id="a:67" class="idref" href="#a:67"><span class="id" title="binder">a</span></a> : <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#R':60"><span class="id" title="variable">R'</span></a>), <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a:67"><span class="id" title="variable">a</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ta':65"><span class="id" title="variable">ta'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#RR':63"><span class="id" title="variable">RR'</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a:67"><span class="id" title="variable">a</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="IN2:70" class="idref" href="#IN2:70"><span class="id" title="binder">IN2</span></a>: <span class="id" title="keyword">forall</span> (<a id="a:69" class="idref" href="#a:69"><span class="id" title="binder">a</span></a> : <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#R:61"><span class="id" title="variable">R</span></a>), <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a:69"><span class="id" title="variable">a</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ta:64"><span class="id" title="variable">ta</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#RR:62"><span class="id" title="variable">RR</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a:69"><span class="id" title="variable">a</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Eq.Eq.html#eutt"><span class="id" title="definition">eutt</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#RU:66"><span class="id" title="variable">RU</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ta:64"><span class="id" title="variable">ta</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ta':65"><span class="id" title="variable">ta'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Eq.Eq.html#eutt"><span class="id" title="definition">eutt</span></a> (<span class="id" title="keyword">fun</span> <a id="u1:71" class="idref" href="#u1:71"><span class="id" title="binder">u1</span></a> <a id="u2:72" class="idref" href="#u2:72"><span class="id" title="binder">u2</span></a> =&gt; <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#RU:66"><span class="id" title="variable">RU</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#u1:71"><span class="id" title="variable">u1</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#u2:72"><span class="id" title="variable">u2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#RR:62"><span class="id" title="variable">RR</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#u1:71"><span class="id" title="variable">u1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#RR':63"><span class="id" title="variable">RR'</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#u2:72"><span class="id" title="variable">u2</span></a>) <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ta:64"><span class="id" title="variable">ta</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ta':65"><span class="id" title="variable">ta'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">E</span> <span class="id" title="var">R</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">ginit</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">gcofix</span> <span class="id" title="var">CIH</span>; <span class="id" title="tactic">intros</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> (<a class="idref" href="ITree.Eq.Eq.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a> <span class="id" title="var">ta</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">IN2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> (<a class="idref" href="ITree.Eq.Eq.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a> <span class="id" title="var">ta'</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">IN1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> (<a class="idref" href="ITree.Eq.Eq.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a> <span class="id" title="var">ta</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> (<a class="idref" href="ITree.Eq.Eq.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a> <span class="id" title="var">ta'</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">gstep</span>. <span class="id" title="tactic">red</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">ta</span>); <span class="id" title="var">remember</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">ta'</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">ta</span> <span class="id" title="var">ta'</span> <span class="id" title="var">Heqi0</span> <span class="id" title="var">Heqi</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">econstructor</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">constructor</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">apply</span> <span class="id" title="var">IN2</span> | <span class="id" title="tactic">apply</span> <span class="id" title="var">IN1</span>]; <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">econstructor</span>. <span class="id" title="var">gfinal</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IN1</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IN2</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pclearbot</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">econstructor</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">gfinal</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IN1</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns_Vis_sub"><span class="id" title="lemma">Returns_Vis_sub</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IN2</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns_Vis_sub"><span class="id" title="lemma">Returns_Vis_sub</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHeqitF</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">eapply</span> <span class="id" title="var">IN2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ReturnsTau"><span class="id" title="constructor">ReturnsTau</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="ITree.Eq.Eq.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHeqitF</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">eapply</span> <span class="id" title="var">IN1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ReturnsTau"><span class="id" title="constructor">ReturnsTau</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="ITree.Eq.Eq.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Returns_impl_image" class="idref" href="#Returns_impl_image"><span class="id" title="lemma">Returns_impl_image</span></a> {<a id="E:73" class="idref" href="#E:73"><span class="id" title="binder">E</span></a> <a id="A:74" class="idref" href="#A:74"><span class="id" title="binder">A</span></a>}:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="ma:75" class="idref" href="#ma:75"><span class="id" title="binder">ma</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:73"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#A:74"><span class="id" title="variable">A</span></a>) (<a id="x:76" class="idref" href="#x:76"><span class="id" title="binder">x</span></a> <a id="y:77" class="idref" href="#y:77"><span class="id" title="binder">y</span></a> : <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#A:74"><span class="id" title="variable">A</span></a>), <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#x:76"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#y:77"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#x:76"><span class="id" title="variable">x</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ma:75"><span class="id" title="variable">ma</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ITree.EqmR.EqmRMonad.html#image"><span class="id" title="definition">image</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ma:75"><span class="id" title="variable">ma</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#x:76"><span class="id" title="variable">x</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#y:77"><span class="id" title="variable">y</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eq.html#eqit_inv_Ret"><span class="id" title="lemma">eqit_inv_Ret</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">EQR</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Eq.Eq.html#eqit_inv_Tau_r"><span class="id" title="lemma">eqit_inv_Tau_r</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHReturns</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHReturns</span>. <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQR</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Eq.Eq.html#eqit_inv_Vis"><span class="id" title="lemma">eqit_inv_Vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">EQR</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">EQR</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Returns_eq_rel_image" class="idref" href="#Returns_eq_rel_image"><span class="id" title="lemma">Returns_eq_rel_image</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="E:78" class="idref" href="#E:78"><span class="id" title="binder">E</span></a> <a id="A:79" class="idref" href="#A:79"><span class="id" title="binder">A</span></a> (<a id="ma:80" class="idref" href="#ma:80"><span class="id" title="binder">ma</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:78"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#A:79"><span class="id" title="variable">A</span></a>), <a class="idref" href="ITree.Basics.HeterogeneousRelations.html#eq_rel"><span class="id" title="definition">eq_rel</span></a> (<span class="id" title="keyword">fun</span> (<a id="x:83" class="idref" href="#x:83"><span class="id" title="binder">x</span></a> <a id="y:84" class="idref" href="#y:84"><span class="id" title="binder">y</span></a> : <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#A:79"><span class="id" title="variable">A</span></a>) =&gt;  <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#x:83"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#y:84"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#x:83"><span class="id" title="variable">x</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ma:80"><span class="id" title="variable">ma</span></a>) (<span class="id" title="keyword">fun</span> <a id="x:81" class="idref" href="#x:81"><span class="id" title="binder">x</span></a> <a id="y:82" class="idref" href="#y:82"><span class="id" title="binder">y</span></a> =&gt; <a class="idref" href="ITree.EqmR.EqmRMonad.html#image"><span class="id" title="definition">image</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ma:80"><span class="id" title="variable">ma</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#x:81"><span class="id" title="variable">x</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#y:82"><span class="id" title="variable">y</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns_impl_image"><span class="id" title="lemma">Returns_impl_image</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">red</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">intuition</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>, <span class="id" title="var">H1</span>. <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#eutt_Returns_"><span class="id" title="lemma">eutt_Returns_</span></a>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Returns_mayRet" class="idref" href="#Returns_mayRet"><span class="id" title="lemma">Returns_mayRet</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="E:85" class="idref" href="#E:85"><span class="id" title="binder">E</span></a> <a id="A:86" class="idref" href="#A:86"><span class="id" title="binder">A</span></a> (<a id="ma:87" class="idref" href="#ma:87"><span class="id" title="binder">ma</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:85"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#A:86"><span class="id" title="variable">A</span></a>) (<a id="a:88" class="idref" href="#a:88"><span class="id" title="binder">a</span></a> : <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#A:86"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a:88"><span class="id" title="variable">a</span></a> <a class="idref" href="ITree.EqmR.EqmRMonad.html#91e97f679796ae2f33b88d366e97515d"><span class="id" title="notation">∈</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ma:87"><span class="id" title="variable">ma</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a:88"><span class="id" title="variable">a</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ma:87"><span class="id" title="variable">ma</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#proj2"><span class="id" title="lemma">proj2</span></a>. <span class="id" title="var">Unshelve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2 : <span class="id" title="tactic">exact</span> (<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">a</span>). <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns_eq_rel_image"><span class="id" title="lemma">Returns_eq_rel_image</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Basics.HeterogeneousRelations.html#eq_rel"><span class="id" title="definition">eq_rel</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">H0</span> <span class="id" title="var">E</span> <span class="id" title="var">A</span> <span class="id" title="var">ma</span>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns_eq_rel_image"><span class="id" title="lemma">Returns_eq_rel_image</span></a>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="observe_eutt" class="idref" href="#observe_eutt"><span class="id" title="lemma">observe_eutt</span></a> {<a id="E:89" class="idref" href="#E:89"><span class="id" title="binder">E</span></a> <a id="A:90" class="idref" href="#A:90"><span class="id" title="binder">A</span></a>}:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="ma:91" class="idref" href="#ma:91"><span class="id" title="binder">ma</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:89"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#A:90"><span class="id" title="variable">A</span></a>) <a id="t:92" class="idref" href="#t:92"><span class="id" title="binder">t</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ma:91"><span class="id" title="variable">ma</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#t:92"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ma:91"><span class="id" title="variable">ma</span></a> <a class="idref" href="ITree.Eq.Eq.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#go"><span class="id" title="constructor">go</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#t:92"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">ma</span>) <span class="id" title="var">eqn</span> : <span class="id" title="var">Hma</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span> : <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="observe_eqitree" class="idref" href="#observe_eqitree"><span class="id" title="lemma">observe_eqitree</span></a> {<a id="E:93" class="idref" href="#E:93"><span class="id" title="binder">E</span></a> <a id="A:94" class="idref" href="#A:94"><span class="id" title="binder">A</span></a>}:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="ma:95" class="idref" href="#ma:95"><span class="id" title="binder">ma</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:93"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#A:94"><span class="id" title="variable">A</span></a>) <a id="t:96" class="idref" href="#t:96"><span class="id" title="binder">t</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ma:95"><span class="id" title="variable">ma</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#t:96"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ma:95"><span class="id" title="variable">ma</span></a> <a class="idref" href="ITree.Eq.Eq.html#7123c605943b5e01235e17fe532efcae"><span class="id" title="notation">≅</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#go"><span class="id" title="constructor">go</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#t:96"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">ma</span>) <span class="id" title="var">eqn</span> : <span class="id" title="var">Hma</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span> : <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="eutt_bind_inv" class="idref" href="#eutt_bind_inv"><span class="id" title="lemma">eutt_bind_inv</span></a> {<a id="E:97" class="idref" href="#E:97"><span class="id" title="binder">E</span></a>} :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="A:98" class="idref" href="#A:98"><span class="id" title="binder">A</span></a> <a id="B:99" class="idref" href="#B:99"><span class="id" title="binder">B</span></a> (<a id="ma:100" class="idref" href="#ma:100"><span class="id" title="binder">ma</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:97"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#A:98"><span class="id" title="variable">A</span></a>) (<a id="k:101" class="idref" href="#k:101"><span class="id" title="binder">k</span></a> <a id="k':102" class="idref" href="#k':102"><span class="id" title="binder">k'</span></a> : <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#A:98"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:97"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#B:99"><span class="id" title="variable">B</span></a>) <a id="R:103" class="idref" href="#R:103"><span class="id" title="binder">R</span></a>,<br/>
&nbsp;&nbsp;<span class="id" title="method">bind</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ma:100"><span class="id" title="variable">ma</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#k:101"><span class="id" title="variable">k</span></a> <a class="idref" href="ITree.EqmR.EqmRMonad.html#d413dbf027cae6a55393170818dfc6e2"><span class="id" title="notation">≈{</span></a><a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#R:103"><span class="id" title="variable">R</span></a><a class="idref" href="ITree.EqmR.EqmRMonad.html#d413dbf027cae6a55393170818dfc6e2"><span class="id" title="notation">}</span></a> <span class="id" title="method">bind</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ma:100"><span class="id" title="variable">ma</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#k':102"><span class="id" title="variable">k'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="a:104" class="idref" href="#a:104"><span class="id" title="binder">a</span></a>, <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a:104"><span class="id" title="variable">a</span></a> <a class="idref" href="ITree.EqmR.EqmRMonad.html#91e97f679796ae2f33b88d366e97515d"><span class="id" title="notation">∈</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ma:100"><span class="id" title="variable">ma</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="a':105" class="idref" href="#a':105"><span class="id" title="binder">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a':105"><span class="id" title="variable">a'</span></a> <a class="idref" href="ITree.EqmR.EqmRMonad.html#91e97f679796ae2f33b88d366e97515d"><span class="id" title="notation">∈</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ma:100"><span class="id" title="variable">ma</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#k:101"><span class="id" title="variable">k</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a:104"><span class="id" title="variable">a</span></a> <a class="idref" href="ITree.EqmR.EqmRMonad.html#d413dbf027cae6a55393170818dfc6e2"><span class="id" title="notation">≈{</span></a><a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#R:103"><span class="id" title="variable">R</span></a><a class="idref" href="ITree.EqmR.EqmRMonad.html#d413dbf027cae6a55393170818dfc6e2"><span class="id" title="notation">}</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#k':102"><span class="id" title="variable">k'</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a':105"><span class="id" title="variable">a'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> @<a class="idref" href="ITree.Eq.Eq.html#eqit_Vis"><span class="id" title="lemma">eqit_Vis</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns_mayRet"><span class="id" title="lemma">Returns_mayRet</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="ITree.Eq.Eq.html#bind_ret_l"><span class="id" title="lemma">Eq.bind_ret_l</span></a>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> &lt;- <a class="idref" href="ITree.Eq.Eq.html#bind_ret_l"><span class="id" title="lemma">Eq.bind_ret_l</span></a> <span class="id" title="tactic">at</span> 3.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H0</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Eq.Eq.html#eqit_Tau_l"><span class="id" title="lemma">eqit_Tau_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#eutt_Tau"><span class="id" title="lemma">eutt_Tau</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHReturns</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H0</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Eq.Eq.html#eutt"><span class="id" title="definition">eutt</span></a> <span class="id" title="var">R</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <span class="id" title="var">e</span> <span class="id" title="var">k0</span>) <span class="id" title="var">k</span>) (<a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <span class="id" title="var">e</span> <span class="id" title="var">k0</span>) <span class="id" title="var">k'</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H0</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Eq.Eq.html#eutt"><span class="id" title="definition">eutt</span></a> <span class="id" title="var">R</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <span class="id" title="var">e</span> (<span class="id" title="keyword">fun</span> <a id="x:108" class="idref" href="#x:108"><span class="id" title="binder">x</span></a> =&gt; <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> (<span class="id" title="var">k0</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#x:106"><span class="id" title="variable">x</span></a>) <span class="id" title="var">k</span>)) (<a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <span class="id" title="var">e</span> (<span class="id" title="keyword">fun</span> <a id="x:109" class="idref" href="#x:109"><span class="id" title="binder">x</span></a> =&gt; <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> (<span class="id" title="var">k0</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#x:107"><span class="id" title="variable">x</span></a>) <span class="id" title="var">k'</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="ITree.Eq.Eq.html#bind_vis"><span class="id" title="lemma">bind_vis</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>. <span class="id" title="var">punfold</span> <span class="id" title="var">H4</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H4</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">H10</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">REL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">REL</span> <span class="id" title="var">x</span>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">REL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHReturns</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>. <span class="id" title="var">contradiction</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="eutt_bind_inv_homog" class="idref" href="#eutt_bind_inv_homog"><span class="id" title="lemma">eutt_bind_inv_homog</span></a> {<a id="E:110" class="idref" href="#E:110"><span class="id" title="binder">E</span></a>} :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="A:111" class="idref" href="#A:111"><span class="id" title="binder">A</span></a> <a id="B:112" class="idref" href="#B:112"><span class="id" title="binder">B</span></a> (<a id="ma:113" class="idref" href="#ma:113"><span class="id" title="binder">ma</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:110"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#A:111"><span class="id" title="variable">A</span></a>) (<a id="k:114" class="idref" href="#k:114"><span class="id" title="binder">k</span></a> <a id="k':115" class="idref" href="#k':115"><span class="id" title="binder">k'</span></a>: <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#A:111"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:110"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#B:112"><span class="id" title="variable">B</span></a>) <a id="R:116" class="idref" href="#R:116"><span class="id" title="binder">R</span></a>,<br/>
&nbsp;&nbsp;<span class="id" title="method">bind</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ma:113"><span class="id" title="variable">ma</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#k:114"><span class="id" title="variable">k</span></a> <a class="idref" href="ITree.EqmR.EqmRMonad.html#d413dbf027cae6a55393170818dfc6e2"><span class="id" title="notation">≈{</span></a><a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#R:116"><span class="id" title="variable">R</span></a><a class="idref" href="ITree.EqmR.EqmRMonad.html#d413dbf027cae6a55393170818dfc6e2"><span class="id" title="notation">}</span></a> <span class="id" title="method">bind</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ma:113"><span class="id" title="variable">ma</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#k':115"><span class="id" title="variable">k'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="a:117" class="idref" href="#a:117"><span class="id" title="binder">a</span></a>, <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a:117"><span class="id" title="variable">a</span></a> <a class="idref" href="ITree.EqmR.EqmRMonad.html#91e97f679796ae2f33b88d366e97515d"><span class="id" title="notation">∈</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ma:113"><span class="id" title="variable">ma</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#k:114"><span class="id" title="variable">k</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a:117"><span class="id" title="variable">a</span></a> <a class="idref" href="ITree.EqmR.EqmRMonad.html#d413dbf027cae6a55393170818dfc6e2"><span class="id" title="notation">≈{</span></a><a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#R:116"><span class="id" title="variable">R</span></a><a class="idref" href="ITree.EqmR.EqmRMonad.html#d413dbf027cae6a55393170818dfc6e2"><span class="id" title="notation">}</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#k':115"><span class="id" title="variable">k'</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a:117"><span class="id" title="variable">a</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> @<a class="idref" href="ITree.Eq.Eq.html#eqit_Vis"><span class="id" title="lemma">eqit_Vis</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns_mayRet"><span class="id" title="lemma">Returns_mayRet</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="ITree.Eq.Eq.html#bind_ret_l"><span class="id" title="lemma">Eq.bind_ret_l</span></a>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H0</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> !<a class="idref" href="ITree.Eq.Eq.html#bind_ret_l"><span class="id" title="lemma">Eq.bind_ret_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#bind_ret_l"><span class="id" title="lemma">Eq.bind_ret_l</span></a>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Eq.Eq.html#eqit_Tau_l"><span class="id" title="lemma">eqit_Tau_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#eutt_Tau"><span class="id" title="lemma">eutt_Tau</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHReturns</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H0</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Eq.Eq.html#eutt"><span class="id" title="definition">eutt</span></a> <span class="id" title="var">R</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <span class="id" title="var">e</span> <span class="id" title="var">k0</span>) <span class="id" title="var">k</span>) (<a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <span class="id" title="var">e</span> <span class="id" title="var">k0</span>) <span class="id" title="var">k'</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H0</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Eq.Eq.html#eutt"><span class="id" title="definition">eutt</span></a> <span class="id" title="var">R</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <span class="id" title="var">e</span> (<span class="id" title="keyword">fun</span> <a id="x:120" class="idref" href="#x:120"><span class="id" title="binder">x</span></a> =&gt; <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> (<span class="id" title="var">k0</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#x:118"><span class="id" title="variable">x</span></a>) <span class="id" title="var">k</span>)) (<a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <span class="id" title="var">e</span> (<span class="id" title="keyword">fun</span> <a id="x:121" class="idref" href="#x:121"><span class="id" title="binder">x</span></a> =&gt; <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> (<span class="id" title="var">k0</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#x:119"><span class="id" title="variable">x</span></a>) <span class="id" title="var">k'</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="ITree.Eq.Eq.html#bind_vis"><span class="id" title="lemma">bind_vis</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>. <span class="id" title="var">punfold</span> <span class="id" title="var">H4</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H4</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">H10</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">REL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">REL</span> <span class="id" title="var">x</span>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">REL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHReturns</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>. <span class="id" title="var">contradiction</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="mayRet_eq_Refl_ITree2" class="idref" href="#mayRet_eq_Refl_ITree2"><span class="id" title="lemma">mayRet_eq_Refl_ITree2</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="E:122" class="idref" href="#E:122"><span class="id" title="binder">E</span></a> <a id="A:123" class="idref" href="#A:123"><span class="id" title="binder">A</span></a> (<a id="ma:124" class="idref" href="#ma:124"><span class="id" title="binder">ma</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:122"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#A:123"><span class="id" title="variable">A</span></a>), <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ma:124"><span class="id" title="variable">ma</span></a> <a class="idref" href="ITree.EqmR.EqmRMonad.html#d413dbf027cae6a55393170818dfc6e2"><span class="id" title="notation">≈{</span></a> <span class="id" title="keyword">fun</span> <a id="a1:125" class="idref" href="#a1:125"><span class="id" title="binder">a1</span></a> <a id="a2:126" class="idref" href="#a2:126"><span class="id" title="binder">a2</span></a> =&gt; <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a1:125"><span class="id" title="variable">a1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a2:126"><span class="id" title="variable">a2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a1:125"><span class="id" title="variable">a1</span></a> <a class="idref" href="ITree.EqmR.EqmRMonad.html#91e97f679796ae2f33b88d366e97515d"><span class="id" title="notation">∈</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ma:124"><span class="id" title="variable">ma</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a2:126"><span class="id" title="variable">a2</span></a> <a class="idref" href="ITree.EqmR.EqmRMonad.html#91e97f679796ae2f33b88d366e97515d"><span class="id" title="notation">∈</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ma:124"><span class="id" title="variable">ma</span></a> <a class="idref" href="ITree.EqmR.EqmRMonad.html#d413dbf027cae6a55393170818dfc6e2"><span class="id" title="notation">}</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ma:124"><span class="id" title="variable">ma</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#itree_eutt_Proper"><span class="id" title="instance">itree_eutt_Proper</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>.<br/>
&nbsp;&nbsp;3 : <span class="id" title="tactic">exact</span> (<span class="id" title="keyword">fun</span> <a id="a1:129" class="idref" href="#a1:129"><span class="id" title="binder">a1</span></a> <a id="a2:130" class="idref" href="#a2:130"><span class="id" title="binder">a2</span></a> =&gt; <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a1:127"><span class="id" title="variable">a1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a2:128"><span class="id" title="variable">a2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a1:127"><span class="id" title="variable">a1</span></a> <span class="id" title="var">ma</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a2:128"><span class="id" title="variable">a2</span></a> <span class="id" title="var">ma</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">red</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">crunch</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns_mayRet"><span class="id" title="lemma">Returns_mayRet</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">crunch</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns_mayRet"><span class="id" title="lemma">Returns_mayRet</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">crunch</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns_mayRet"><span class="id" title="lemma">Returns_mayRet</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns_mayRet"><span class="id" title="lemma">Returns_mayRet</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#eutt_Returns2_"><span class="id" title="lemma">eutt_Returns2_</span></a>. <span class="id" title="var">all</span> : <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="mayRet_eq_Refl_ITree" class="idref" href="#mayRet_eq_Refl_ITree"><span class="id" title="lemma">mayRet_eq_Refl_ITree</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="E:131" class="idref" href="#E:131"><span class="id" title="binder">E</span></a> <a id="A:132" class="idref" href="#A:132"><span class="id" title="binder">A</span></a> (<a id="ma:133" class="idref" href="#ma:133"><span class="id" title="binder">ma</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:131"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#A:132"><span class="id" title="variable">A</span></a>), <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ma:133"><span class="id" title="variable">ma</span></a> <a class="idref" href="ITree.EqmR.EqmRMonad.html#d413dbf027cae6a55393170818dfc6e2"><span class="id" title="notation">≈{</span></a> <span class="id" title="keyword">fun</span> <a id="a1:134" class="idref" href="#a1:134"><span class="id" title="binder">a1</span></a> <a id="a2:135" class="idref" href="#a2:135"><span class="id" title="binder">a2</span></a> =&gt; <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a1:134"><span class="id" title="variable">a1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a2:135"><span class="id" title="variable">a2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a1:134"><span class="id" title="variable">a1</span></a> <a class="idref" href="ITree.EqmR.EqmRMonad.html#91e97f679796ae2f33b88d366e97515d"><span class="id" title="notation">∈</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ma:133"><span class="id" title="variable">ma</span></a> <a class="idref" href="ITree.EqmR.EqmRMonad.html#d413dbf027cae6a55393170818dfc6e2"><span class="id" title="notation">}</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ma:133"><span class="id" title="variable">ma</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#itree_eutt_Proper"><span class="id" title="instance">itree_eutt_Proper</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>.<br/>
&nbsp;&nbsp;3 : <span class="id" title="tactic">exact</span> (<span class="id" title="keyword">fun</span> <a id="a1:138" class="idref" href="#a1:138"><span class="id" title="binder">a1</span></a> <a id="a2:139" class="idref" href="#a2:139"><span class="id" title="binder">a2</span></a> =&gt; <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a1:136"><span class="id" title="variable">a1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a2:137"><span class="id" title="variable">a2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a1:136"><span class="id" title="variable">a1</span></a> <span class="id" title="var">ma</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">red</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">crunch</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns_mayRet"><span class="id" title="lemma">Returns_mayRet</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">crunch</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns_mayRet"><span class="id" title="lemma">Returns_mayRet</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#eutt_Returns_"><span class="id" title="lemma">eutt_Returns_</span></a>. <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="image_ma_Refl_ITree" class="idref" href="#image_ma_Refl_ITree"><span class="id" title="lemma">image_ma_Refl_ITree</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="E:140" class="idref" href="#E:140"><span class="id" title="binder">E</span></a> <a id="A:141" class="idref" href="#A:141"><span class="id" title="binder">A</span></a> (<a id="ma:142" class="idref" href="#ma:142"><span class="id" title="binder">ma</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:140"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#A:141"><span class="id" title="variable">A</span></a>), <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ma:142"><span class="id" title="variable">ma</span></a> <a class="idref" href="ITree.EqmR.EqmRMonad.html#d413dbf027cae6a55393170818dfc6e2"><span class="id" title="notation">≈{</span></a> <a class="idref" href="ITree.EqmR.EqmRMonad.html#image"><span class="id" title="definition">image</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ma:142"><span class="id" title="variable">ma</span></a> <a class="idref" href="ITree.EqmR.EqmRMonad.html#d413dbf027cae6a55393170818dfc6e2"><span class="id" title="notation">}</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ma:142"><span class="id" title="variable">ma</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#itree_eutt_Proper_mono"><span class="id" title="instance">itree_eutt_Proper_mono</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>.<br/>
&nbsp;&nbsp;3 : <span class="id" title="tactic">exact</span> (<span class="id" title="keyword">fun</span> <a id="a1:145" class="idref" href="#a1:145"><span class="id" title="binder">a1</span></a> <a id="a2:146" class="idref" href="#a2:146"><span class="id" title="binder">a2</span></a> =&gt; <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a1:143"><span class="id" title="variable">a1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a2:144"><span class="id" title="variable">a2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a1:143"><span class="id" title="variable">a1</span></a> <span class="id" title="var">ma</span>).<br/>
&nbsp;&nbsp;2 : <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#eutt_Returns_"><span class="id" title="lemma">eutt_Returns_</span></a>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> [-&gt; ?].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns_impl_image"><span class="id" title="lemma">Returns_impl_image</span></a>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="tau_eutt_L" class="idref" href="#tau_eutt_L"><span class="id" title="lemma">tau_eutt_L</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="E:147" class="idref" href="#E:147"><span class="id" title="binder">E</span></a> <a id="A:148" class="idref" href="#A:148"><span class="id" title="binder">A</span></a> (<a id="t:149" class="idref" href="#t:149"><span class="id" title="binder">t</span></a> <a id="t':150" class="idref" href="#t':150"><span class="id" title="binder">t'</span></a>: <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:147"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#A:148"><span class="id" title="variable">A</span></a>), <a class="idref" href="ITree.Core.ITreeDefinition.html#Tau"><span class="id" title="abbreviation">Tau</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#t:149"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Eq.Eq.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#t':150"><span class="id" title="variable">t'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#t:149"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Eq.Eq.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#t':150"><span class="id" title="variable">t'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Eq.Eq.html#eutt_Tau"><span class="id" title="lemma">eutt_Tau</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span>; <span class="id" title="var">pstep</span>; <span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Eq.Eq.html#EqTauR"><span class="id" title="constructor">EqTauR</span></a>; <span class="id" title="tactic">auto</span>. <span class="id" title="var">punfold</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span>; <span class="id" title="var">pstep</span>; <span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Eq.Eq.html#EqTauL"><span class="id" title="constructor">EqTauL</span></a>; <span class="id" title="tactic">auto</span>. <span class="id" title="var">punfold</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="tau_eutt_R" class="idref" href="#tau_eutt_R"><span class="id" title="lemma">tau_eutt_R</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="E:151" class="idref" href="#E:151"><span class="id" title="binder">E</span></a> <a id="A:152" class="idref" href="#A:152"><span class="id" title="binder">A</span></a> (<a id="t:153" class="idref" href="#t:153"><span class="id" title="binder">t</span></a> <a id="t':154" class="idref" href="#t':154"><span class="id" title="binder">t'</span></a>: <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:151"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#A:152"><span class="id" title="variable">A</span></a>), <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#t:153"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Eq.Eq.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Tau"><span class="id" title="abbreviation">Tau</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#t':154"><span class="id" title="variable">t'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#t:153"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Eq.Eq.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#t':154"><span class="id" title="variable">t'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Eq.Eq.html#eutt_Tau"><span class="id" title="lemma">eutt_Tau</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span>; <span class="id" title="var">pstep</span>; <span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Eq.Eq.html#EqTauL"><span class="id" title="constructor">EqTauL</span></a>; <span class="id" title="tactic">auto</span>. <span class="id" title="var">punfold</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span>; <span class="id" title="var">pstep</span>; <span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Eq.Eq.html#EqTauR"><span class="id" title="constructor">EqTauR</span></a>; <span class="id" title="tactic">auto</span>. <span class="id" title="var">punfold</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="ret_eutt_L" class="idref" href="#ret_eutt_L"><span class="id" title="lemma">ret_eutt_L</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="E:155" class="idref" href="#E:155"><span class="id" title="binder">E</span></a> <a id="A:156" class="idref" href="#A:156"><span class="id" title="binder">A</span></a> <a id="B:157" class="idref" href="#B:157"><span class="id" title="binder">B</span></a> (<a id="a:158" class="idref" href="#a:158"><span class="id" title="binder">a</span></a> : <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#A:156"><span class="id" title="variable">A</span></a>) (<a id="mb:159" class="idref" href="#mb:159"><span class="id" title="binder">mb</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:155"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#B:157"><span class="id" title="variable">B</span></a>) (<a id="R:160" class="idref" href="#R:160"><span class="id" title="binder">R</span></a>: <a class="idref" href="ITree.Basics.HeterogeneousRelations.html#relationH"><span class="id" title="definition">relationH</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#A:156"><span class="id" title="variable">A</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#B:157"><span class="id" title="variable">B</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a:158"><span class="id" title="variable">a</span></a> <a class="idref" href="ITree.EqmR.EqmRMonad.html#d413dbf027cae6a55393170818dfc6e2"><span class="id" title="notation">≈{</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#R:160"><span class="id" title="variable">R</span></a> <a class="idref" href="ITree.EqmR.EqmRMonad.html#d413dbf027cae6a55393170818dfc6e2"><span class="id" title="notation">}</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#mb:159"><span class="id" title="variable">mb</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="b:161" class="idref" href="#b:161"><span class="id" title="binder">b</span></a> : <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#B:157"><span class="id" title="variable">B</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#mb:159"><span class="id" title="variable">mb</span></a> <a class="idref" href="ITree.Eq.Eq.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#b:161"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#R:160"><span class="id" title="variable">R</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a:158"><span class="id" title="variable">a</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#b:161"><span class="id" title="variable">b</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">tl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">genobs</span> <span class="id" title="var">tl</span> <span class="id" title="var">otl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">genobs</span> <span class="id" title="var">mb</span> <span class="id" title="var">otr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">Heqotr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqtl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqotl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Heqtl</span>. <span class="id" title="var">revert</span> <span class="id" title="var">Heqotl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">tl</span>. <span class="id" title="var">revert</span> <span class="id" title="var">mb</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">r2</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span>. <span class="id" title="tactic">split</span>. <span class="id" title="var">pstep</span>. <span class="id" title="tactic">red</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqotr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqotl</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqotl</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqotl</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqotl</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eq.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqotr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">Heqotr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="b:164" class="idref" href="#b:164"><span class="id" title="binder">b</span></a> : <span class="id" title="var">B</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <span class="id" title="var">t2</span> <a class="idref" href="ITree.Eq.Eq.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#b:162"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <span class="id" title="var">R</span> <span class="id" title="var">a</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#b:162"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="b:165" class="idref" href="#b:165"><span class="id" title="binder">b</span></a>: <span class="id" title="var">B</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Tau"><span class="id" title="abbreviation">Tau</span></a> <span class="id" title="var">t2</span> <a class="idref" href="ITree.Eq.Eq.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#b:163"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <span class="id" title="var">R</span> <span class="id" title="var">a</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#b:163"><span class="id" title="variable">b</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span>. <span class="id" title="var">pstep</span>; <span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHeqitF</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="ret_eutt_R" class="idref" href="#ret_eutt_R"><span class="id" title="lemma">ret_eutt_R</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="E:166" class="idref" href="#E:166"><span class="id" title="binder">E</span></a> <a id="A:167" class="idref" href="#A:167"><span class="id" title="binder">A</span></a> <a id="B:168" class="idref" href="#B:168"><span class="id" title="binder">B</span></a> (<a id="b:169" class="idref" href="#b:169"><span class="id" title="binder">b</span></a> : <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#B:168"><span class="id" title="variable">B</span></a>) (<a id="ma:170" class="idref" href="#ma:170"><span class="id" title="binder">ma</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:166"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#A:167"><span class="id" title="variable">A</span></a>) (<a id="R:171" class="idref" href="#R:171"><span class="id" title="binder">R</span></a>: <a class="idref" href="ITree.Basics.HeterogeneousRelations.html#relationH"><span class="id" title="definition">relationH</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#A:167"><span class="id" title="variable">A</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#B:168"><span class="id" title="variable">B</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ma:170"><span class="id" title="variable">ma</span></a> <a class="idref" href="ITree.EqmR.EqmRMonad.html#d413dbf027cae6a55393170818dfc6e2"><span class="id" title="notation">≈{</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#R:171"><span class="id" title="variable">R</span></a> <a class="idref" href="ITree.EqmR.EqmRMonad.html#d413dbf027cae6a55393170818dfc6e2"><span class="id" title="notation">}</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#b:169"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="a:172" class="idref" href="#a:172"><span class="id" title="binder">a</span></a> : <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#A:167"><span class="id" title="variable">A</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ma:170"><span class="id" title="variable">ma</span></a> <a class="idref" href="ITree.Eq.Eq.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a:172"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#R:171"><span class="id" title="variable">R</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a:172"><span class="id" title="variable">a</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#b:169"><span class="id" title="variable">b</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <span class="id" title="var">b</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">tl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">genobs</span> <span class="id" title="var">tl</span> <span class="id" title="var">otl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">genobs</span> <span class="id" title="var">ma</span> <span class="id" title="var">otr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">Heqotr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqtl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqotl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Heqtl</span>. <span class="id" title="var">revert</span> <span class="id" title="var">Heqotl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">tl</span>. <span class="id" title="var">revert</span> <span class="id" title="var">ma</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">r1</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span>. <span class="id" title="tactic">split</span>. <span class="id" title="var">pstep</span>. <span class="id" title="tactic">red</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqotr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqotl</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqotl</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqotl</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eq.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqotr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">Heqotr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#tau_eutt_L"><span class="id" title="lemma">tau_eutt_L</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHeqitF</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqotl</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="vis_eutt_L" class="idref" href="#vis_eutt_L"><span class="id" title="lemma">vis_eutt_L</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="E:173" class="idref" href="#E:173"><span class="id" title="binder">E</span></a> <a id="A:174" class="idref" href="#A:174"><span class="id" title="binder">A</span></a> <a id="B:175" class="idref" href="#B:175"><span class="id" title="binder">B</span></a> <a id="X:176" class="idref" href="#X:176"><span class="id" title="binder">X</span></a> (<a id="e:177" class="idref" href="#e:177"><span class="id" title="binder">e</span></a> : <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:173"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#X:176"><span class="id" title="variable">X</span></a>) (<a id="k:178" class="idref" href="#k:178"><span class="id" title="binder">k</span></a> : <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#X:176"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:173"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#A:174"><span class="id" title="variable">A</span></a>) (<a id="mb:179" class="idref" href="#mb:179"><span class="id" title="binder">mb</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:173"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#B:175"><span class="id" title="variable">B</span></a>) (<a id="R:180" class="idref" href="#R:180"><span class="id" title="binder">R</span></a>: <a class="idref" href="ITree.Basics.HeterogeneousRelations.html#relationH"><span class="id" title="definition">relationH</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#A:174"><span class="id" title="variable">A</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#B:175"><span class="id" title="variable">B</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#e:177"><span class="id" title="variable">e</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#k:178"><span class="id" title="variable">k</span></a> <a class="idref" href="ITree.EqmR.EqmRMonad.html#d413dbf027cae6a55393170818dfc6e2"><span class="id" title="notation">≈{</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#R:180"><span class="id" title="variable">R</span></a> <a class="idref" href="ITree.EqmR.EqmRMonad.html#d413dbf027cae6a55393170818dfc6e2"><span class="id" title="notation">}</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#mb:179"><span class="id" title="variable">mb</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="k':181" class="idref" href="#k':181"><span class="id" title="binder">k'</span></a> : <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#X:176"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:173"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#B:175"><span class="id" title="variable">B</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#mb:179"><span class="id" title="variable">mb</span></a> <a class="idref" href="ITree.Eq.Eq.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#e:177"><span class="id" title="variable">e</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#k':181"><span class="id" title="variable">k'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <span class="id" title="var">e</span> <span class="id" title="var">k</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">tl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">genobs</span> <span class="id" title="var">tl</span> <span class="id" title="var">otl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">genobs</span> <span class="id" title="var">mb</span> <span class="id" title="var">otr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">Heqotr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqtl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqotl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Heqtl</span>. <span class="id" title="var">revert</span> <span class="id" title="var">Heqotl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">tl</span>. <span class="id" title="var">revert</span> <span class="id" title="var">mb</span>. <span class="id" title="var">revert</span> <span class="id" title="var">e</span> <span class="id" title="var">k</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqotl</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqotl</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">REL</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqotl</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqotl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">k2</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqotr</span>. <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="ITree.Eq.Eq.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqotl</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eq.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqotr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">Heqotr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#tau_eutt_L"><span class="id" title="lemma">tau_eutt_L</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHeqitF</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="vis_eutt_R" class="idref" href="#vis_eutt_R"><span class="id" title="lemma">vis_eutt_R</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="E:182" class="idref" href="#E:182"><span class="id" title="binder">E</span></a> <a id="A:183" class="idref" href="#A:183"><span class="id" title="binder">A</span></a> <a id="B:184" class="idref" href="#B:184"><span class="id" title="binder">B</span></a> <a id="X:185" class="idref" href="#X:185"><span class="id" title="binder">X</span></a> (<a id="e:186" class="idref" href="#e:186"><span class="id" title="binder">e</span></a> : <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:182"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#X:185"><span class="id" title="variable">X</span></a>) (<a id="k:187" class="idref" href="#k:187"><span class="id" title="binder">k</span></a> : <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#X:185"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:182"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#B:184"><span class="id" title="variable">B</span></a>) (<a id="ma:188" class="idref" href="#ma:188"><span class="id" title="binder">ma</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:182"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#A:183"><span class="id" title="variable">A</span></a>) (<a id="R:189" class="idref" href="#R:189"><span class="id" title="binder">R</span></a>: <a class="idref" href="ITree.Basics.HeterogeneousRelations.html#relationH"><span class="id" title="definition">relationH</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#A:183"><span class="id" title="variable">A</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#B:184"><span class="id" title="variable">B</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ma:188"><span class="id" title="variable">ma</span></a> <a class="idref" href="ITree.EqmR.EqmRMonad.html#d413dbf027cae6a55393170818dfc6e2"><span class="id" title="notation">≈{</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#R:189"><span class="id" title="variable">R</span></a> <a class="idref" href="ITree.EqmR.EqmRMonad.html#d413dbf027cae6a55393170818dfc6e2"><span class="id" title="notation">}</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#e:186"><span class="id" title="variable">e</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#k:187"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="k':190" class="idref" href="#k':190"><span class="id" title="binder">k'</span></a> : <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#X:185"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:182"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#A:183"><span class="id" title="variable">A</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ma:188"><span class="id" title="variable">ma</span></a> <a class="idref" href="ITree.Eq.Eq.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#e:186"><span class="id" title="variable">e</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#k':190"><span class="id" title="variable">k'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <span class="id" title="var">e</span> <span class="id" title="var">k</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">tl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">genobs</span> <span class="id" title="var">tl</span> <span class="id" title="var">otl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">genobs</span> <span class="id" title="var">ma</span> <span class="id" title="var">otr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">Heqotr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqtl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqotl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Heqtl</span>. <span class="id" title="var">revert</span> <span class="id" title="var">Heqotl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">tl</span>. <span class="id" title="var">revert</span> <span class="id" title="var">ma</span>. <span class="id" title="var">revert</span> <span class="id" title="var">e</span> <span class="id" title="var">k</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqotl</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqotl</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">REL</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqotl</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqotl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">k1</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqotr</span>. <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="ITree.Eq.Eq.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eq.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqotr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">Heqotr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#tau_eutt_L"><span class="id" title="lemma">tau_eutt_L</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHeqitF</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqotl</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="ret_mayRet" class="idref" href="#ret_mayRet"><span class="id" title="lemma">ret_mayRet</span></a> : <span class="id" title="keyword">forall</span> <a id="E:191" class="idref" href="#E:191"><span class="id" title="binder">E</span></a> <a id="A:192" class="idref" href="#A:192"><span class="id" title="binder">A</span></a> (<a id="x:193" class="idref" href="#x:193"><span class="id" title="binder">x</span></a> : <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#A:192"><span class="id" title="variable">A</span></a>), <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#x:193"><span class="id" title="variable">x</span></a> <a class="idref" href="ITree.EqmR.EqmRMonad.html#91e97f679796ae2f33b88d366e97515d"><span class="id" title="notation">∈</span></a> <span class="id" title="method">ret</span> (<span class="id" title="var">m</span> := <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:191"><span class="id" title="variable">E</span></a>) <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#x:193"><span class="id" title="variable">x</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Eq.Eq.html#eqit_inv_Ret"><span class="id" title="lemma">eqit_inv_Ret</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">EQR</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="bind_mayRet" class="idref" href="#bind_mayRet"><span class="id" title="lemma">bind_mayRet</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="E:194" class="idref" href="#E:194"><span class="id" title="binder">E</span></a> <a id="A:195" class="idref" href="#A:195"><span class="id" title="binder">A</span></a> (<a id="u:196" class="idref" href="#u:196"><span class="id" title="binder">u</span></a> : <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#A:195"><span class="id" title="variable">A</span></a>) (<a id="ma:197" class="idref" href="#ma:197"><span class="id" title="binder">ma</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:194"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#A:195"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#u:196"><span class="id" title="variable">u</span></a> <a class="idref" href="ITree.EqmR.EqmRMonad.html#91e97f679796ae2f33b88d366e97515d"><span class="id" title="notation">∈</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ma:197"><span class="id" title="variable">ma</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="B:198" class="idref" href="#B:198"><span class="id" title="binder">B</span></a> (<a id="v:199" class="idref" href="#v:199"><span class="id" title="binder">v</span></a> : <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#B:198"><span class="id" title="variable">B</span></a>) (<a id="k:200" class="idref" href="#k:200"><span class="id" title="binder">k</span></a> : <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#A:195"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:194"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#B:198"><span class="id" title="variable">B</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#v:199"><span class="id" title="variable">v</span></a> <a class="idref" href="ITree.EqmR.EqmRMonad.html#91e97f679796ae2f33b88d366e97515d"><span class="id" title="notation">∈</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#k:200"><span class="id" title="variable">k</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#u:196"><span class="id" title="variable">u</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#v:199"><span class="id" title="variable">v</span></a> <a class="idref" href="ITree.EqmR.EqmRMonad.html#91e97f679796ae2f33b88d366e97515d"><span class="id" title="notation">∈</span></a> <a class="idref" href="ITree.EqmR.EqmRMonad.html#91e97f679796ae2f33b88d366e97515d"><span class="id" title="notation">(</span></a><span class="id" title="method">bind</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ma:197"><span class="id" title="variable">ma</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#k:200"><span class="id" title="variable">k</span></a><a class="idref" href="ITree.EqmR.EqmRMonad.html#91e97f679796ae2f33b88d366e97515d"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns_mayRet"><span class="id" title="lemma">Returns_mayRet</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>, <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns_mayRet"><span class="id" title="lemma">Returns_mayRet</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">k</span> <span class="id" title="var">v</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#bind_ret_l"><span class="id" title="lemma">Eq.bind_ret_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHReturns</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#bind_vis"><span class="id" title="lemma">bind_vis</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ReturnsVis"><span class="id" title="constructor">ReturnsVis</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHReturns</span>. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>]<br/>
<span class="id" title="keyword">Instance</span> <a id="eqmR_mayRet_l_ITree" class="idref" href="#eqmR_mayRet_l_ITree"><span class="id" title="instance">eqmR_mayRet_l_ITree</span></a> {<a id="E:201" class="idref" href="#E:201"><span class="id" title="binder">E</span></a>}: <a class="idref" href="ITree.EqmR.EqmRMonad.html#MayRetL"><span class="id" title="class">MayRetL</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:201"><span class="id" title="variable">E</span></a>).<br/>
<span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>* <span class="id" title="var">EQ</span> <span class="id" title="var">a1</span> <span class="id" title="var">IN</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns_mayRet"><span class="id" title="lemma">Returns_mayRet</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">IN</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">EQ</span>. <span class="id" title="var">revert</span> <span class="id" title="var">RA</span> <span class="id" title="var">ma2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">IN</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <span class="id" title="var">a1</span> <a class="idref" href="ITree.EqmR.EqmRMonad.html#d413dbf027cae6a55393170818dfc6e2"><span class="id" title="notation">≈{</span></a> <span class="id" title="var">RA</span> <a class="idref" href="ITree.EqmR.EqmRMonad.html#d413dbf027cae6a55393170818dfc6e2"><span class="id" title="notation">}</span></a> <span class="id" title="var">ma2</span>). {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ret_eutt_L"><span class="id" title="lemma">ret_eutt_L</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQR</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eq.html#eqit_inv_Ret"><span class="id" title="lemma">eqit_inv_Ret</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">EQR</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHIN</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#tau_eutt_R"><span class="id" title="lemma">tau_eutt_R</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">EQ</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <span class="id" title="var">e</span> <span class="id" title="var">k</span> <a class="idref" href="ITree.EqmR.EqmRMonad.html#d413dbf027cae6a55393170818dfc6e2"><span class="id" title="notation">≈{</span></a> <span class="id" title="var">RA</span> <a class="idref" href="ITree.EqmR.EqmRMonad.html#d413dbf027cae6a55393170818dfc6e2"><span class="id" title="notation">}</span></a> <span class="id" title="var">ma2</span>). {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;} <span class="id" title="tactic">clear</span> <span class="id" title="var">EQ</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">EQ</span> := <span class="id" title="var">H0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#vis_eutt_L"><span class="id" title="lemma">vis_eutt_L</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <span class="id" title="var">e</span> <span class="id" title="var">k</span> <a class="idref" href="ITree.EqmR.EqmRMonad.html#d413dbf027cae6a55393170818dfc6e2"><span class="id" title="notation">≈{</span></a><span class="id" title="var">RA</span><a class="idref" href="ITree.EqmR.EqmRMonad.html#d413dbf027cae6a55393170818dfc6e2"><span class="id" title="notation">}</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <span class="id" title="var">e</span> <span class="id" title="var">x0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Eq.Eq.html#eqit_inv_Vis"><span class="id" title="lemma">eqit_inv_Vis</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">u</span> := <span class="id" title="var">x</span>)<span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHIN</span> <span class="id" title="var">RA</span> (<span class="id" title="var">x0</span> <span class="id" title="var">x</span>) <span class="id" title="var">H0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IHIN</span> <span class="id" title="keyword">as</span> (? &amp; ? &amp; ?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">x1</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns_mayRet"><span class="id" title="lemma">Returns_mayRet</span></a>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ReturnsVis"><span class="id" title="constructor">ReturnsVis</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns_mayRet"><span class="id" title="lemma">Returns_mayRet</span></a>. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>]<br/>
<span class="id" title="keyword">Instance</span> <a id="eqmR_mayRet_r_ITree" class="idref" href="#eqmR_mayRet_r_ITree"><span class="id" title="instance">eqmR_mayRet_r_ITree</span></a> {<a id="E:202" class="idref" href="#E:202"><span class="id" title="binder">E</span></a>}: <a class="idref" href="ITree.EqmR.EqmRMonad.html#MayRetR"><span class="id" title="class">MayRetR</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:202"><span class="id" title="variable">E</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">red</span>. <span class="id" title="tactic">intros</span>* <span class="id" title="var">EQ</span> <span class="id" title="var">a2</span> <span class="id" title="var">IN</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns_mayRet"><span class="id" title="lemma">Returns_mayRet</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">IN</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">EQ</span>. <span class="id" title="var">revert</span> <span class="id" title="var">RA</span> <span class="id" title="var">ma1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">IN</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">ma1</span> <a class="idref" href="ITree.EqmR.EqmRMonad.html#d413dbf027cae6a55393170818dfc6e2"><span class="id" title="notation">≈{</span></a> <span class="id" title="var">RA</span> <a class="idref" href="ITree.EqmR.EqmRMonad.html#d413dbf027cae6a55393170818dfc6e2"><span class="id" title="notation">}</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <span class="id" title="var">a2</span>). {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ret_eutt_R"><span class="id" title="lemma">ret_eutt_R</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQR</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eq.html#eqit_inv_Ret"><span class="id" title="lemma">eqit_inv_Ret</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">EQR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHIN</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#tau_eutt_R"><span class="id" title="lemma">tau_eutt_R</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">EQ</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">ma1</span> <a class="idref" href="ITree.EqmR.EqmRMonad.html#d413dbf027cae6a55393170818dfc6e2"><span class="id" title="notation">≈{</span></a> <span class="id" title="var">RA</span> <a class="idref" href="ITree.EqmR.EqmRMonad.html#d413dbf027cae6a55393170818dfc6e2"><span class="id" title="notation">}</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <span class="id" title="var">e</span> <span class="id" title="var">k</span>). {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;} <span class="id" title="tactic">clear</span> <span class="id" title="var">EQ</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">EQ</span> := <span class="id" title="var">H0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#vis_eutt_R"><span class="id" title="lemma">vis_eutt_R</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <span class="id" title="var">e</span> <span class="id" title="var">x0</span> <a class="idref" href="ITree.EqmR.EqmRMonad.html#d413dbf027cae6a55393170818dfc6e2"><span class="id" title="notation">≈{</span></a><span class="id" title="var">RA</span><a class="idref" href="ITree.EqmR.EqmRMonad.html#d413dbf027cae6a55393170818dfc6e2"><span class="id" title="notation">}</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <span class="id" title="var">e</span> <span class="id" title="var">k</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Eq.Eq.html#eqit_inv_Vis"><span class="id" title="lemma">eqit_inv_Vis</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">u</span> := <span class="id" title="var">x</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHIN</span> <span class="id" title="var">RA</span> (<span class="id" title="var">x0</span> <span class="id" title="var">x</span>) <span class="id" title="var">H0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IHIN</span> <span class="id" title="keyword">as</span> (? &amp; ? &amp; ?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">x1</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns_mayRet"><span class="id" title="lemma">Returns_mayRet</span></a>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ReturnsVis"><span class="id" title="constructor">ReturnsVis</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns_mayRet"><span class="id" title="lemma">Returns_mayRet</span></a>. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="eutt_prod_rel" class="idref" href="#eutt_prod_rel"><span class="id" title="lemma">eutt_prod_rel</span></a> {<a id="E:203" class="idref" href="#E:203"><span class="id" title="binder">E</span></a>}:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="A:204" class="idref" href="#A:204"><span class="id" title="binder">A</span></a> <a id="B:205" class="idref" href="#B:205"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="RA:206" class="idref" href="#RA:206"><span class="id" title="binder">RA</span></a> : <a class="idref" href="ITree.Basics.HeterogeneousRelations.html#relationH"><span class="id" title="definition">relationH</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#A:204"><span class="id" title="variable">A</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#A:204"><span class="id" title="variable">A</span></a>) (<a id="RB:207" class="idref" href="#RB:207"><span class="id" title="binder">RB</span></a> : <a class="idref" href="ITree.Basics.HeterogeneousRelations.html#relationH"><span class="id" title="definition">relationH</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#B:205"><span class="id" title="variable">B</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#B:205"><span class="id" title="variable">B</span></a>) (<a id="ma:208" class="idref" href="#ma:208"><span class="id" title="binder">ma</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:203"><span class="id" title="variable">E</span></a> (<a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#A:204"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#B:205"><span class="id" title="variable">B</span></a>)),<br/>
&nbsp;&nbsp;<a class="idref" href="ITree.Eq.Eq.html#eutt"><span class="id" title="definition">eutt</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#RA:206"><span class="id" title="variable">RA</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <span class="id" title="notation">&lt;$&gt;</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ma:208"><span class="id" title="variable">ma</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <span class="id" title="notation">&lt;$&gt;</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ma:208"><span class="id" title="variable">ma</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ITree.Eq.Eq.html#eutt"><span class="id" title="definition">eutt</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#RB:207"><span class="id" title="variable">RB</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <span class="id" title="notation">&lt;$&gt;</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ma:208"><span class="id" title="variable">ma</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <span class="id" title="notation">&lt;$&gt;</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ma:208"><span class="id" title="variable">ma</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ITree.Eq.Eq.html#eutt"><span class="id" title="definition">eutt</span></a> (<a class="idref" href="ITree.Basics.HeterogeneousRelations.html#prod_rel"><span class="id" title="inductive">prod_rel</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#RA:206"><span class="id" title="variable">RA</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#RB:207"><span class="id" title="variable">RB</span></a>) <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ma:208"><span class="id" title="variable">ma</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ma:208"><span class="id" title="variable">ma</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="tactic">until</span> <span class="id" title="var">RB</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">einit</span>. <span class="id" title="var">ecofix</span> <span class="id" title="var">CIH</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">H_fst</span> <span class="id" title="var">H_snd</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">genobs</span> <span class="id" title="var">ma</span> <span class="id" title="var">oma</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">ma</span>) <span class="id" title="var">eqn</span>: <span class="id" title="var">EQma</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="var">pclearbot</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<span class="id" title="var">ma</span> <a class="idref" href="ITree.Eq.Eq.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <span class="id" title="var">r</span>). {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span>. <span class="id" title="var">pstep</span>. <span class="id" title="tactic">red</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">EQma</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_fst</span>, <span class="id" title="var">H_snd</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.map"><span class="id" title="definition">ITree.map</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#bind_ret_l"><span class="id" title="lemma">Eq.bind_ret_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_fst</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#bind_ret_l"><span class="id" title="lemma">Eq.bind_ret_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_snd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eq.html#eqit_inv_Ret"><span class="id" title="lemma">eqit_inv_Ret</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_fst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eq.html#eqit_inv_Ret"><span class="id" title="lemma">eqit_inv_Ret</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_snd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">r</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.UpToTaus.html#euttG_ret"><span class="id" title="lemma">euttG_ret</span></a>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<span class="id" title="var">ma</span> <a class="idref" href="ITree.Eq.Eq.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Tau"><span class="id" title="abbreviation">Tau</span></a> <span class="id" title="var">t</span>). {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span>. <span class="id" title="var">pstep</span>. <span class="id" title="tactic">red</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">EQma</span>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">t</span> <a class="idref" href="ITree.Eq.Eq.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <span class="id" title="var">t</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">left</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="var">gstep</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="var">gfinal</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIHL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<span class="id" title="var">ma</span> <a class="idref" href="ITree.Eq.Eq.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <span class="id" title="var">e</span> <span class="id" title="var">k</span>). {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span>. <span class="id" title="var">pstep</span>. <span class="id" title="tactic">red</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">EQma</span>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">red</span>. <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">k</span> <span class="id" title="var">v</span> <a class="idref" href="ITree.Eq.Eq.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <span class="id" title="var">k</span> <span class="id" title="var">v</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">EQma</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="var">gstep</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">gfinal</span>. <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">CIHH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_fst</span>, <span class="id" title="var">H_snd</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.map"><span class="id" title="definition">ITree.map</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#bind_vis"><span class="id" title="lemma">bind_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_fst</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#bind_vis"><span class="id" title="lemma">bind_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_snd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_fst</span>. <span class="id" title="var">punfold</span> <span class="id" title="var">H_fst</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H_fst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">REL</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">REL</span> <span class="id" title="var">v</span>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">REL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">H0</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H0</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_fst</span>, <span class="id" title="var">H_snd</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.map"><span class="id" title="definition">ITree.map</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#bind_vis"><span class="id" title="lemma">bind_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_snd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_snd</span>. <span class="id" title="var">punfold</span> <span class="id" title="var">H_snd</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H_snd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">REL</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">REL</span> <span class="id" title="var">v</span>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">REL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">H0</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H0</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="eutt_prod_rel_homo'" class="idref" href="#eutt_prod_rel_homo'"><span class="id" title="lemma">eutt_prod_rel_homo'</span></a> {<a id="E:209" class="idref" href="#E:209"><span class="id" title="binder">E</span></a>}:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="A:210" class="idref" href="#A:210"><span class="id" title="binder">A</span></a> <a id="B:211" class="idref" href="#B:211"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="RA:212" class="idref" href="#RA:212"><span class="id" title="binder">RA</span></a> : <a class="idref" href="ITree.Basics.HeterogeneousRelations.html#relationH"><span class="id" title="definition">relationH</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#A:210"><span class="id" title="variable">A</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#A:210"><span class="id" title="variable">A</span></a>) (<a id="RB:213" class="idref" href="#RB:213"><span class="id" title="binder">RB</span></a> : <a class="idref" href="ITree.Basics.HeterogeneousRelations.html#relationH"><span class="id" title="definition">relationH</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#B:211"><span class="id" title="variable">B</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#B:211"><span class="id" title="variable">B</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="ma:214" class="idref" href="#ma:214"><span class="id" title="binder">ma</span></a> <a id="ma':215" class="idref" href="#ma':215"><span class="id" title="binder">ma'</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:209"><span class="id" title="variable">E</span></a> (<a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#A:210"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#B:211"><span class="id" title="variable">B</span></a>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ma:214"><span class="id" title="variable">ma</span></a> <a class="idref" href="ITree.Eq.Eq.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ma':215"><span class="id" title="variable">ma'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Eq.Eq.html#eutt"><span class="id" title="definition">eutt</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#RA:212"><span class="id" title="variable">RA</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <span class="id" title="notation">&lt;$&gt;</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ma:214"><span class="id" title="variable">ma</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <span class="id" title="notation">&lt;$&gt;</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ma':215"><span class="id" title="variable">ma'</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Eq.Eq.html#eutt"><span class="id" title="definition">eutt</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#RB:213"><span class="id" title="variable">RB</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <span class="id" title="notation">&lt;$&gt;</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ma:214"><span class="id" title="variable">ma</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <span class="id" title="notation">&lt;$&gt;</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ma':215"><span class="id" title="variable">ma'</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Eq.Eq.html#eutt"><span class="id" title="definition">eutt</span></a> (<a class="idref" href="ITree.Basics.HeterogeneousRelations.html#prod_rel"><span class="id" title="inductive">prod_rel</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#RA:212"><span class="id" title="variable">RA</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#RB:213"><span class="id" title="variable">RB</span></a>) <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ma:214"><span class="id" title="variable">ma</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ma':215"><span class="id" title="variable">ma'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#eutt_prod_rel"><span class="id" title="lemma">eutt_prod_rel</span></a>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>]<br/>
<span class="id" title="keyword">Instance</span> <a id="eqmR_prod_rel_ITree" class="idref" href="#eqmR_prod_rel_ITree"><span class="id" title="instance">eqmR_prod_rel_ITree</span></a> {<a id="E:216" class="idref" href="#E:216"><span class="id" title="binder">E</span></a>} : <a class="idref" href="ITree.EqmR.EqmRMonad.html#RelProd"><span class="id" title="class">RelProd</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:216"><span class="id" title="variable">E</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="tactic">until</span> <span class="id" title="var">RB</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">einit</span>. <span class="id" title="var">ecofix</span> <span class="id" title="var">CIH</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">EQ</span> <span class="id" title="var">EQ'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a>, (<a class="idref" href="ITree.Eq.Eq.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a> <span class="id" title="var">m2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">EQ</span>; <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <span class="id" title="notation">&lt;$&gt;</span> <span class="id" title="var">m1</span>) <span class="id" title="var">eqn</span>: <span class="id" title="var">P</span>; <span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <span class="id" title="notation">&lt;$&gt;</span> <span class="id" title="var">m2</span>) <span class="id" title="var">eqn</span>: <span class="id" title="var">P'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Q</span>: <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <span class="id" title="notation">&lt;$&gt;</span> <span class="id" title="var">m1</span> <a class="idref" href="ITree.Eq.Eq.html#7123c605943b5e01235e17fe532efcae"><span class="id" title="notation">≅</span></a> <span class="id" title="var">i</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">reflexivity</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Q'</span>: <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <span class="id" title="notation">&lt;$&gt;</span> <span class="id" title="var">m2</span> <a class="idref" href="ITree.Eq.Eq.html#7123c605943b5e01235e17fe532efcae"><span class="id" title="notation">≅</span></a> <span class="id" title="var">i0</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">reflexivity</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">P</span> <span class="id" title="var">P'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">genobs</span> <span class="id" title="var">i</span> <span class="id" title="var">ot</span>; <span class="id" title="var">genobs</span> <span class="id" title="var">i0</span> <span class="id" title="var">os</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">hinduction</span> <span class="id" title="var">EQ</span> <span class="id" title="keyword">before</span> <span class="id" title="var">CIHH</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="var">pclearbot</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>; <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#observe_eutt"><span class="id" title="lemma">observe_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>, <span class="id" title="var">Heqos</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="method">fmap</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Q</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Q'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eq.html#eqit_inv_bind_ret"><span class="id" title="lemma">eqit_inv_bind_ret</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>, <span class="id" title="var">Heqos</span>. <span class="id" title="var">crunch</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>, <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ'</span>. <span class="id" title="var">efinal</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>, <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eq.html#eqit_inv"><span class="id" title="lemma">eqit_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>, <span class="id" title="var">H2</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">rewrite</span>! <a class="idref" href="ITree.Eq.Eq.html#bind_ret_l"><span class="id" title="lemma">Eq.bind_ret_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eq.html#eqit_inv"><span class="id" title="lemma">eqit_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ'</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span>, <span class="id" title="var">x0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eq.html#eqit_Ret"><span class="id" title="lemma">eqit_Ret</span></a>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>, <span class="id" title="var">Heqos</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#observe_eqitree"><span class="id" title="lemma">observe_eqitree</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>, <span class="id" title="var">Heqos</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="method">fmap</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>, <span class="id" title="var">Heqos</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Q</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Q'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eq.html#eqitree_inv_bind_tau"><span class="id" title="lemma">eqitree_inv_bind_tau</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>. <span class="id" title="var">crunch</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2 : { <span class="id" title="var">punfold</span> <span class="id" title="var">H0</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H0</span>. <span class="id" title="var">inv</span> <span class="id" title="var">CHECK</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eq.html#eqitree_inv_bind_tau"><span class="id" title="lemma">eqitree_inv_bind_tau</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>. <span class="id" title="var">crunch</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2 : { <span class="id" title="var">punfold</span> <span class="id" title="var">H2</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H2</span>. <span class="id" title="var">inv</span> <span class="id" title="var">CHECK</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>, <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">estep</span>; <span class="id" title="var">ebase</span>; <span class="id" title="tactic">right</span>; <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIHL</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>, <span class="id" title="var">H2</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>, <span class="id" title="var">H1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ'</span>. <span class="id" title="tactic">rewrite</span>!<a class="idref" href="ITree.Eq.Eq.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ'</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>, <span class="id" title="var">Heqos</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#observe_eqitree"><span class="id" title="lemma">observe_eqitree</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>, <span class="id" title="var">Heqos</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">Heqot</span> <span class="id" title="var">into</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">Heqos</span> <span class="id" title="var">into</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Q</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Q'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eq.html#eqitree_inv_bind_vis"><span class="id" title="lemma">eqitree_inv_bind_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="var">crunch</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2 : { <span class="id" title="var">punfold</span> <span class="id" title="var">H1</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H1</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eq.html#eqitree_inv_bind_vis"><span class="id" title="lemma">eqitree_inv_bind_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="var">crunch</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2 : { <span class="id" title="var">punfold</span> <span class="id" title="var">H2</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H2</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>, <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Eq.UpToTaus.html#euttG_vis"><span class="id" title="lemma">euttG_vis</span></a>; <span class="id" title="var">ebase</span>; <span class="id" title="tactic">left</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">CIHH</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="method">fmap</span>. <span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">REL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>, <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="method">fmap</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ'</span>. <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#bind_vis"><span class="id" title="lemma">bind_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Eq.Eq.html#eqit_inv_Vis"><span class="id" title="lemma">eqit_inv_Vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ'</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *. <span class="id" title="var">crunch</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">m1</span>) <span class="id" title="var">eqn</span> : <span class="id" title="var">Hm1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#observe_eqitree"><span class="id" title="lemma">observe_eqitree</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hm1</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hm1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#observe_eqitree"><span class="id" title="lemma">observe_eqitree</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="method">fmap</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Q</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hm1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#bind_ret_l"><span class="id" title="lemma">Eq.bind_ret_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">Heqot</span>. <span class="id" title="var">inv</span> <span class="id" title="var">Heqot</span>. <span class="id" title="var">inv</span> <span class="id" title="var">CHECK0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#tau_euttge"><span class="id" title="lemma">tau_euttge</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHEQ</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#observe_eqitree"><span class="id" title="lemma">observe_eqitree</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hm1</span>, <span class="id" title="var">Heqot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="method">fmap</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Q</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hm1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>. <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#bind_tau"><span class="id" title="lemma">bind_tau</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="ITree.Eq.Eq.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="var">t</span>). <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hm1</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#observe_eqitree"><span class="id" title="lemma">observe_eqitree</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hm1</span>. <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#observe_eqitree"><span class="id" title="lemma">observe_eqitree</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqot</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Q</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hm1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="method">fmap</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Q</span>. <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#bind_tau"><span class="id" title="lemma">bind_tau</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#eqitree_Tau"><span class="id" title="lemma">eqitree_Tau</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Q</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#observe_eqitree"><span class="id" title="lemma">observe_eqitree</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hm1</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hm1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#observe_eqitree"><span class="id" title="lemma">observe_eqitree</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="method">fmap</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Q</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hm1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>. <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#bind_vis"><span class="id" title="lemma">bind_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">Heqot</span>. <span class="id" title="var">inv</span> <span class="id" title="var">Heqot</span>. <span class="id" title="var">inv</span> <span class="id" title="var">CHECK0</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">m2</span>) <span class="id" title="var">eqn</span> : <span class="id" title="var">Hm1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#observe_eqitree"><span class="id" title="lemma">observe_eqitree</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hm1</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hm1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#observe_eqitree"><span class="id" title="lemma">observe_eqitree</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="method">fmap</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Q'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hm1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>. <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#bind_ret_l"><span class="id" title="lemma">Eq.bind_ret_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">Heqos</span>. <span class="id" title="var">inv</span> <span class="id" title="var">Heqos</span>. <span class="id" title="var">inv</span> <span class="id" title="var">CHECK0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#tau_euttge"><span class="id" title="lemma">tau_euttge</span></a>. <span class="id" title="tactic">rewrite</span> (<a class="idref" href="ITree.Eq.Eq.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a> <span class="id" title="var">t</span>). <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHEQ</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#observe_eqitree"><span class="id" title="lemma">observe_eqitree</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hm1</span>, <span class="id" title="var">Heqos</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="method">fmap</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Q'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hm1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>. <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#bind_tau"><span class="id" title="lemma">bind_tau</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="ITree.Eq.Eq.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="var">t</span>). <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hm1</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#observe_eqitree"><span class="id" title="lemma">observe_eqitree</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hm1</span>. <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#observe_eqitree"><span class="id" title="lemma">observe_eqitree</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqos</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Q'</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hm1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Q'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="method">fmap</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Q'</span>. <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#bind_tau"><span class="id" title="lemma">bind_tau</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Q'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#eqitree_Tau"><span class="id" title="lemma">eqitree_Tau</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Q'</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#observe_eqitree"><span class="id" title="lemma">observe_eqitree</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hm1</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hm1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#observe_eqitree"><span class="id" title="lemma">observe_eqitree</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="method">fmap</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Q'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hm1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>. <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#bind_vis"><span class="id" title="lemma">bind_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">Heqos</span>. <span class="id" title="var">inv</span> <span class="id" title="var">Heqos</span>. <span class="id" title="var">inv</span> <span class="id" title="var">CHECK0</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>]<br/>
<span class="id" title="keyword">Instance</span> <a id="eqmR_prod_fst_inv_ITree" class="idref" href="#eqmR_prod_fst_inv_ITree"><span class="id" title="instance">eqmR_prod_fst_inv_ITree</span></a> {<a id="E:217" class="idref" href="#E:217"><span class="id" title="binder">E</span></a>}: <a class="idref" href="ITree.EqmR.EqmRMonad.html#FmapFst"><span class="id" title="class">FmapFst</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:217"><span class="id" title="variable">E</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="method">fmap</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Eq.Eq.html#eutt_clo_bind"><span class="id" title="lemma">eutt_clo_bind</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eq.html#eqit_Ret"><span class="id" title="lemma">eqit_Ret</span></a>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">u1</span>, <span class="id" title="var">u2</span>; <span class="id" title="var">inv</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>]<br/>
<span class="id" title="keyword">Instance</span> <a id="eqmR_prod_snd_inv_ITree" class="idref" href="#eqmR_prod_snd_inv_ITree"><span class="id" title="instance">eqmR_prod_snd_inv_ITree</span></a> {<a id="E:218" class="idref" href="#E:218"><span class="id" title="binder">E</span></a>}: <a class="idref" href="ITree.EqmR.EqmRMonad.html#FmapSnd"><span class="id" title="class">FmapSnd</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:218"><span class="id" title="variable">E</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="method">fmap</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Eq.Eq.html#eutt_clo_bind"><span class="id" title="lemma">eutt_clo_bind</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eq.html#eqit_Ret"><span class="id" title="lemma">eqit_Ret</span></a>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">u1</span>, <span class="id" title="var">u2</span>; <span class="id" title="var">inv</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>]<br/>
<span class="id" title="keyword">Instance</span> <a id="eqmR_sum_inl_ITree" class="idref" href="#eqmR_sum_inl_ITree"><span class="id" title="instance">eqmR_sum_inl_ITree</span></a> {<a id="E:219" class="idref" href="#E:219"><span class="id" title="binder">E</span></a>}: <a class="idref" href="ITree.EqmR.EqmRMonad.html#FmapInl"><span class="id" title="class">FmapInl</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:219"><span class="id" title="variable">E</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="method">fmap</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Eq.Eq.html#eutt_clo_bind"><span class="id" title="lemma">eutt_clo_bind</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eq.html#eqit_Ret"><span class="id" title="lemma">eqit_Ret</span></a>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>]<br/>
<span class="id" title="keyword">Instance</span> <a id="eqmR_sum_inr_ITree" class="idref" href="#eqmR_sum_inr_ITree"><span class="id" title="instance">eqmR_sum_inr_ITree</span></a> {<a id="E:220" class="idref" href="#E:220"><span class="id" title="binder">E</span></a>}: <a class="idref" href="ITree.EqmR.EqmRMonad.html#FmapInr"><span class="id" title="class">FmapInr</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:220"><span class="id" title="variable">E</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="method">fmap</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Eq.Eq.html#eutt_clo_bind"><span class="id" title="lemma">eutt_clo_bind</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eq.html#eqit_Ret"><span class="id" title="lemma">eqit_Ret</span></a>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>]<br/>
<span class="id" title="keyword">Instance</span> <a id="fmap_inv_ITree'" class="idref" href="#fmap_inv_ITree'"><span class="id" title="instance">fmap_inv_ITree'</span></a> {<a id="E:221" class="idref" href="#E:221"><span class="id" title="binder">E</span></a>}: <a class="idref" href="ITree.EqmR.EqmRMonad.html#FmapInv_mayRet"><span class="id" title="class">FmapInv_mayRet</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:221"><span class="id" title="variable">E</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="tactic">until</span> <span class="id" title="var">ma2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<span class="id" title="keyword">fun</span> <a id="a:224" class="idref" href="#a:224"><span class="id" title="binder">a</span></a> <a id="a':225" class="idref" href="#a':225"><span class="id" title="binder">a'</span></a> =&gt; <a class="idref" href="ITree.EqmR.EqmRMonad.html#mayRet_rel"><span class="id" title="definition">mayRet_rel</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <span class="id" title="var">E</span>) <span class="id" title="var">ma1</span> <span class="id" title="var">ma2</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a:222"><span class="id" title="variable">a</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a':223"><span class="id" title="variable">a'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <span class="id" title="var">R</span> (<span class="id" title="var">f1</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a:222"><span class="id" title="variable">a</span></a>) (<span class="id" title="var">f2</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a':223"><span class="id" title="variable">a'</span></a>)) <span class="id" title="keyword">as</span> <span class="id" title="var">QQ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Basics.HeterogeneousRelations.html#c6c2f6d79c8e0e40e751a34bde6a2835"><span class="id" title="notation">(</span></a><span class="id" title="keyword">fun</span> <a id="a:228" class="idref" href="#a:228"><span class="id" title="binder">a</span></a> <a id="a':229" class="idref" href="#a':229"><span class="id" title="binder">a'</span></a> =&gt; <a class="idref" href="ITree.EqmR.EqmRMonad.html#mayRet_rel"><span class="id" title="definition">mayRet_rel</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <span class="id" title="var">E</span>) <span class="id" title="var">ma1</span> <span class="id" title="var">ma2</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a:226"><span class="id" title="variable">a</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a':227"><span class="id" title="variable">a'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <span class="id" title="var">R</span> (<span class="id" title="var">f1</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a:226"><span class="id" title="variable">a</span></a>) (<span class="id" title="var">f2</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a':227"><span class="id" title="variable">a'</span></a>)<a class="idref" href="ITree.Basics.HeterogeneousRelations.html#c6c2f6d79c8e0e40e751a34bde6a2835"><span class="id" title="notation">)</span></a> <a class="idref" href="ITree.Basics.HeterogeneousRelations.html#c6c2f6d79c8e0e40e751a34bde6a2835"><span class="id" title="notation">⊑</span></a> <span class="id" title="var">QQ</span>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">HeqQQ</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H</span> <span class="id" title="var">into</span> <span class="id" title="var">HeqQQ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">ma1</span> <span class="id" title="var">ma2</span> <span class="id" title="var">HeqQQ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">einit</span>. <span class="id" title="var">ecofix</span> <span class="id" title="var">CIH</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * ? <span class="id" title="var">EQ</span>. <span class="id" title="tactic">intros</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a>, (<a class="idref" href="ITree.Eq.Eq.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a> <span class="id" title="var">ma2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">EQ</span>; <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<span class="id" title="var">f1</span> <span class="id" title="notation">&lt;$&gt;</span> <span class="id" title="var">ma1</span>) <span class="id" title="var">eqn</span>: <span class="id" title="var">P</span>; <span class="id" title="var">remember</span> (<span class="id" title="var">f2</span> <span class="id" title="notation">&lt;$&gt;</span> <span class="id" title="var">ma2</span>) <span class="id" title="var">eqn</span>: <span class="id" title="var">P'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Q</span>: <span class="id" title="var">f1</span> <span class="id" title="notation">&lt;$&gt;</span> <span class="id" title="var">ma1</span> <a class="idref" href="ITree.Eq.Eq.html#7123c605943b5e01235e17fe532efcae"><span class="id" title="notation">≅</span></a> <span class="id" title="var">i</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">reflexivity</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Q'</span>: <span class="id" title="var">f2</span> <span class="id" title="notation">&lt;$&gt;</span> <span class="id" title="var">ma2</span> <a class="idref" href="ITree.Eq.Eq.html#7123c605943b5e01235e17fe532efcae"><span class="id" title="notation">≅</span></a> <span class="id" title="var">i0</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">reflexivity</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">P</span> <span class="id" title="var">P'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">genobs</span> <span class="id" title="var">i</span> <span class="id" title="var">ot</span>; <span class="id" title="var">genobs</span> <span class="id" title="var">i0</span> <span class="id" title="var">os</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">hinduction</span> <span class="id" title="var">EQ</span> <span class="id" title="keyword">before</span> <span class="id" title="var">CIHH</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="var">pclearbot</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>; <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#observe_eqitree"><span class="id" title="lemma">observe_eqitree</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>, <span class="id" title="var">Heqos</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="method">fmap</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Q</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Q'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eq.html#eqitree_inv_bind_ret"><span class="id" title="lemma">eqitree_inv_bind_ret</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>, <span class="id" title="var">Heqos</span>. <span class="id" title="var">crunch</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Q</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Q'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>, <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">efinal</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eq.html#eqit_Ret"><span class="id" title="lemma">eqit_Ret</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">HeqQQ</span>. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span>!<a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns_mayRet"><span class="id" title="lemma">Returns_mayRet</span></a>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>, <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eq.html#eqit_inv"><span class="id" title="lemma">eqit_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>, <span class="id" title="var">H2</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>, <span class="id" title="var">Heqos</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#observe_eqitree"><span class="id" title="lemma">observe_eqitree</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>, <span class="id" title="var">Heqos</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="method">fmap</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>, <span class="id" title="var">Heqos</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Q</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Q'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eq.html#eqitree_inv_bind_tau"><span class="id" title="lemma">eqitree_inv_bind_tau</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>. <span class="id" title="var">crunch</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2 : { <span class="id" title="var">punfold</span> <span class="id" title="var">H0</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H0</span>. <span class="id" title="var">inv</span> <span class="id" title="var">CHECK</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eq.html#eqitree_inv_bind_tau"><span class="id" title="lemma">eqitree_inv_bind_tau</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>. <span class="id" title="var">crunch</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2 : { <span class="id" title="var">punfold</span> <span class="id" title="var">H2</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H2</span>. <span class="id" title="var">inv</span> <span class="id" title="var">CHECK</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>, <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">estep</span>; <span class="id" title="var">ebase</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIHL</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>, <span class="id" title="var">H2</span>. <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.EqmR.EqmRMonad.html#mayRet_rel"><span class="id" title="definition">mayRet_rel</span></a>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">HeqQQ</span>. <span class="id" title="var">crunch</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span>!<a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns_mayRet"><span class="id" title="lemma">Returns_mayRet</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>, <span class="id" title="var">H1</span>. <span class="id" title="tactic">rewrite</span>! <a class="idref" href="ITree.Eq.Eq.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns_mayRet"><span class="id" title="lemma">Returns_mayRet</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>, <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>, <span class="id" title="var">Heqos</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#observe_eqitree"><span class="id" title="lemma">observe_eqitree</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>, <span class="id" title="var">Heqos</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">Heqot</span> <span class="id" title="var">into</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">Heqos</span> <span class="id" title="var">into</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Q</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Q'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eq.html#eqitree_inv_bind_vis"><span class="id" title="lemma">eqitree_inv_bind_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="var">crunch</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2 : { <span class="id" title="var">punfold</span> <span class="id" title="var">H1</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H1</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eq.html#eqitree_inv_bind_vis"><span class="id" title="lemma">eqitree_inv_bind_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="var">crunch</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2 : { <span class="id" title="var">punfold</span> <span class="id" title="var">H2</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H2</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>, <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Eq.UpToTaus.html#euttG_vis"><span class="id" title="lemma">euttG_vis</span></a>; <span class="id" title="var">ebase</span>; <span class="id" title="tactic">left</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">CIHH</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="var">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="method">fmap</span>. <span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">REL</span> <span class="id" title="var">v</span>). <span class="id" title="tactic">red</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">REL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.EqmR.EqmRMonad.html#mayRet_rel"><span class="id" title="definition">mayRet_rel</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">HeqQQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">crunch</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns_mayRet"><span class="id" title="lemma">Returns_mayRet</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>, <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">crunch</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns_mayRet"><span class="id" title="lemma">Returns_mayRet</span></a>; <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ReturnsVis"><span class="id" title="constructor">ReturnsVis</span></a>; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns_mayRet"><span class="id" title="lemma">Returns_mayRet</span></a>; <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ReturnsVis"><span class="id" title="constructor">ReturnsVis</span></a>; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns_mayRet"><span class="id" title="lemma">Returns_mayRet</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">ma1</span>) <span class="id" title="var">eqn</span> : <span class="id" title="var">Hma1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#observe_eqitree"><span class="id" title="lemma">observe_eqitree</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hma1</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hma1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#observe_eqitree"><span class="id" title="lemma">observe_eqitree</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="method">fmap</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Q</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>. <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#bind_ret_l"><span class="id" title="lemma">Eq.bind_ret_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">Heqot</span>. <span class="id" title="var">inv</span> <span class="id" title="var">Heqot</span>. <span class="id" title="var">inv</span> <span class="id" title="var">CHECK0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#tau_euttge"><span class="id" title="lemma">tau_euttge</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHEQ</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#observe_eqitree"><span class="id" title="lemma">observe_eqitree</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hma1</span>, <span class="id" title="var">Heqot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="method">fmap</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Q</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hma1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>. <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#bind_tau"><span class="id" title="lemma">bind_tau</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#eqitree_Tau"><span class="id" title="lemma">eqitree_Tau</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>. <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">HeqQQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.EqmR.EqmRMonad.html#mayRet_rel"><span class="id" title="definition">mayRet_rel</span></a> <span class="id" title="tactic">in</span> *. <span class="id" title="var">crunch</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#observe_eutt"><span class="id" title="lemma">observe_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hma1</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hma1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns_mayRet"><span class="id" title="lemma">Returns_mayRet</span></a>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hma1</span>. <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns_mayRet"><span class="id" title="lemma">Returns_mayRet</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#observe_eqitree"><span class="id" title="lemma">observe_eqitree</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hma1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#observe_eqitree"><span class="id" title="lemma">observe_eqitree</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="method">fmap</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Q</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hma1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#bind_vis"><span class="id" title="lemma">bind_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">Heqot</span>. <span class="id" title="var">inv</span> <span class="id" title="var">Heqot</span>. <span class="id" title="var">inv</span> <span class="id" title="var">CHECK0</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">ma2</span>) <span class="id" title="var">eqn</span> : <span class="id" title="var">Hma1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#observe_eqitree"><span class="id" title="lemma">observe_eqitree</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hma1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#observe_eqitree"><span class="id" title="lemma">observe_eqitree</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="method">fmap</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Q'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hma1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>. <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#bind_ret_l"><span class="id" title="lemma">Eq.bind_ret_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">Heqos</span>. <span class="id" title="var">inv</span> <span class="id" title="var">Heqos</span>. <span class="id" title="var">inv</span> <span class="id" title="var">CHECK0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#tau_euttge"><span class="id" title="lemma">tau_euttge</span></a>. <span class="id" title="tactic">rewrite</span> (<a class="idref" href="ITree.Eq.Eq.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a> <span class="id" title="var">t</span>). <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHEQ</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#observe_eqitree"><span class="id" title="lemma">observe_eqitree</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hma1</span>, <span class="id" title="var">Heqos</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="method">fmap</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Q'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hma1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>. <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#bind_tau"><span class="id" title="lemma">bind_tau</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#eqitree_Tau"><span class="id" title="lemma">eqitree_Tau</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>. <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">HeqQQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.EqmR.EqmRMonad.html#mayRet_rel"><span class="id" title="definition">mayRet_rel</span></a> <span class="id" title="tactic">in</span> *. <span class="id" title="var">crunch</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#observe_eutt"><span class="id" title="lemma">observe_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hma1</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hma1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns_mayRet"><span class="id" title="lemma">Returns_mayRet</span></a>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hma1</span>. <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns_mayRet"><span class="id" title="lemma">Returns_mayRet</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#observe_eqitree"><span class="id" title="lemma">observe_eqitree</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hma1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#observe_eqitree"><span class="id" title="lemma">observe_eqitree</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="method">fmap</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Q'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hma1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#bind_vis"><span class="id" title="lemma">bind_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">Heqos</span>. <span class="id" title="var">inv</span> <span class="id" title="var">Heqos</span>. <span class="id" title="var">inv</span> <span class="id" title="var">CHECK0</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>]<br/>
<span class="id" title="keyword">Instance</span> <a id="eqmR_sum_rel_ITree" class="idref" href="#eqmR_sum_rel_ITree"><span class="id" title="instance">eqmR_sum_rel_ITree</span></a> {<a id="E:230" class="idref" href="#E:230"><span class="id" title="binder">E</span></a>}: <a class="idref" href="ITree.EqmR.EqmRMonad.html#RelSum"><span class="id" title="class">RelSum</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:230"><span class="id" title="variable">E</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span>; [<span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">unfold</span> <span class="id" title="method">fmap</span>|].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Eq.Eq.html#eutt_clo_bind"><span class="id" title="lemma">eutt_clo_bind</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eq.html#eqit_Ret"><span class="id" title="lemma">eqit_Ret</span></a>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">u1</span>, <span class="id" title="var">u2</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">inv</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<span class="id" title="var">H</span> (<span class="id" title="var">A1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">+</span></a> <span class="id" title="var">B1</span>)%<span class="id" title="keyword">type</span> (<span class="id" title="var">A2</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">+</span></a> <span class="id" title="var">B2</span>)%<span class="id" title="keyword">type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> (<span class="id" title="var">RA</span> <a class="idref" href="ITree.Basics.HeterogeneousRelations.html#35f5d2b36f88861ca82eeac028d070d1"><span class="id" title="notation">⊕</span></a> <span class="id" title="var">RB</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">inl_P</span>: <a class="idref" href="ITree.Basics.HeterogeneousRelations.html#ProperH"><span class="id" title="definition">ProperH</span></a> (<a class="idref" href="ITree.Basics.HeterogeneousRelations.html#respectfulH"><span class="id" title="definition">respectfulH</span></a> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span> (<span class="id" title="var">A1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">+</span></a> <span class="id" title="var">B1</span>) (<span class="id" title="var">A2</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">+</span></a> <span class="id" title="var">B2</span>) <span class="id" title="var">RA</span> (<span class="id" title="var">RA</span> <a class="idref" href="ITree.Basics.HeterogeneousRelations.html#35f5d2b36f88861ca82eeac028d070d1"><span class="id" title="notation">⊕</span></a> <span class="id" title="var">RB</span>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a>) <span class="id" title="tactic">by</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">inr_P</span>: <a class="idref" href="ITree.Basics.HeterogeneousRelations.html#ProperH"><span class="id" title="definition">ProperH</span></a> (<a class="idref" href="ITree.Basics.HeterogeneousRelations.html#respectfulH"><span class="id" title="definition">respectfulH</span></a> <span class="id" title="var">B1</span> <span class="id" title="var">B2</span> (<span class="id" title="var">A1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">+</span></a> <span class="id" title="var">B1</span>) (<span class="id" title="var">A2</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">+</span></a> <span class="id" title="var">B2</span>) <span class="id" title="var">RB</span> (<span class="id" title="var">RA</span> <a class="idref" href="ITree.Basics.HeterogeneousRelations.html#35f5d2b36f88861ca82eeac028d070d1"><span class="id" title="notation">⊕</span></a> <span class="id" title="var">RB</span>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a>) <span class="id" title="tactic">by</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H</span> <span class="id" title="var">inl_P</span> <span class="id" title="var">inr_P</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#fmap_inv_ITree'"><span class="id" title="instance">fmap_inv_ITree'</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#itree_eutt_Proper_mono"><span class="id" title="instance">itree_eutt_Proper_mono</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">intro</span>; <span class="id" title="var">crunch</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span>, <span class="id" title="var">y</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>]<br/>
<span class="id" title="keyword">Lemma</span> <a id="eqmR_prod_sum_rel_ITree" class="idref" href="#eqmR_prod_sum_rel_ITree"><span class="id" title="lemma">eqmR_prod_sum_rel_ITree</span></a> {<a id="E:231" class="idref" href="#E:231"><span class="id" title="binder">E</span></a>}:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="A:232" class="idref" href="#A:232"><span class="id" title="binder">A</span></a> <a id="B:233" class="idref" href="#B:233"><span class="id" title="binder">B</span></a> <a id="C:234" class="idref" href="#C:234"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="RA:235" class="idref" href="#RA:235"><span class="id" title="binder">RA</span></a> : <a class="idref" href="ITree.Basics.HeterogeneousRelations.html#relationH"><span class="id" title="definition">relationH</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#A:232"><span class="id" title="variable">A</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#A:232"><span class="id" title="variable">A</span></a>) (<a id="RB:236" class="idref" href="#RB:236"><span class="id" title="binder">RB</span></a> : <a class="idref" href="ITree.Basics.HeterogeneousRelations.html#relationH"><span class="id" title="definition">relationH</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#B:233"><span class="id" title="variable">B</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#B:233"><span class="id" title="variable">B</span></a>) (<a id="RC:237" class="idref" href="#RC:237"><span class="id" title="binder">RC</span></a> : <a class="idref" href="ITree.Basics.HeterogeneousRelations.html#relationH"><span class="id" title="definition">relationH</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#C:234"><span class="id" title="variable">C</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#C:234"><span class="id" title="variable">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="ma:238" class="idref" href="#ma:238"><span class="id" title="binder">ma</span></a> <a id="ma':239" class="idref" href="#ma':239"><span class="id" title="binder">ma'</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:231"><span class="id" title="variable">E</span></a> (<a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#C:234"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">+</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#A:232"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#B:233"><span class="id" title="variable">B</span></a>)%<span class="id" title="keyword">type</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.EqmR.EqmRMonad.html#d413dbf027cae6a55393170818dfc6e2"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Basics.Basics.html#fst_sum"><span class="id" title="definition">fst_sum</span></a> <span class="id" title="notation">&lt;$&gt;</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ma:238"><span class="id" title="variable">ma</span></a><a class="idref" href="ITree.EqmR.EqmRMonad.html#d413dbf027cae6a55393170818dfc6e2"><span class="id" title="notation">)</span></a> <a class="idref" href="ITree.EqmR.EqmRMonad.html#d413dbf027cae6a55393170818dfc6e2"><span class="id" title="notation">≈{</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#RC:237"><span class="id" title="variable">RC</span></a> <a class="idref" href="ITree.Basics.HeterogeneousRelations.html#35f5d2b36f88861ca82eeac028d070d1"><span class="id" title="notation">⊕</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#RA:235"><span class="id" title="variable">RA</span></a> <a class="idref" href="ITree.EqmR.EqmRMonad.html#d413dbf027cae6a55393170818dfc6e2"><span class="id" title="notation">}</span></a> <a class="idref" href="ITree.EqmR.EqmRMonad.html#d413dbf027cae6a55393170818dfc6e2"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Basics.Basics.html#fst_sum"><span class="id" title="definition">fst_sum</span></a> <span class="id" title="notation">&lt;$&gt;</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ma':239"><span class="id" title="variable">ma'</span></a><a class="idref" href="ITree.EqmR.EqmRMonad.html#d413dbf027cae6a55393170818dfc6e2"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.EqmR.EqmRMonad.html#d413dbf027cae6a55393170818dfc6e2"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Basics.Basics.html#snd_sum"><span class="id" title="definition">snd_sum</span></a> <span class="id" title="notation">&lt;$&gt;</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ma:238"><span class="id" title="variable">ma</span></a><a class="idref" href="ITree.EqmR.EqmRMonad.html#d413dbf027cae6a55393170818dfc6e2"><span class="id" title="notation">)</span></a> <a class="idref" href="ITree.EqmR.EqmRMonad.html#d413dbf027cae6a55393170818dfc6e2"><span class="id" title="notation">≈{</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#RC:237"><span class="id" title="variable">RC</span></a> <a class="idref" href="ITree.Basics.HeterogeneousRelations.html#35f5d2b36f88861ca82eeac028d070d1"><span class="id" title="notation">⊕</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#RB:236"><span class="id" title="variable">RB</span></a> <a class="idref" href="ITree.EqmR.EqmRMonad.html#d413dbf027cae6a55393170818dfc6e2"><span class="id" title="notation">}</span></a> <a class="idref" href="ITree.EqmR.EqmRMonad.html#d413dbf027cae6a55393170818dfc6e2"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Basics.Basics.html#snd_sum"><span class="id" title="definition">snd_sum</span></a> <span class="id" title="notation">&lt;$&gt;</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ma':239"><span class="id" title="variable">ma'</span></a><a class="idref" href="ITree.EqmR.EqmRMonad.html#d413dbf027cae6a55393170818dfc6e2"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ma:238"><span class="id" title="variable">ma</span></a> <a class="idref" href="ITree.EqmR.EqmRMonad.html#d413dbf027cae6a55393170818dfc6e2"><span class="id" title="notation">≈{</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#RC:237"><span class="id" title="variable">RC</span></a> <a class="idref" href="ITree.Basics.HeterogeneousRelations.html#35f5d2b36f88861ca82eeac028d070d1"><span class="id" title="notation">⊕</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#RA:235"><span class="id" title="variable">RA</span></a> <a class="idref" href="ITree.Basics.HeterogeneousRelations.html#eab4b218501f1659d1ac8330d8450aec"><span class="id" title="notation">⊗</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#RB:236"><span class="id" title="variable">RB</span></a> <a class="idref" href="ITree.EqmR.EqmRMonad.html#d413dbf027cae6a55393170818dfc6e2"><span class="id" title="notation">}</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ma':239"><span class="id" title="variable">ma'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="tactic">until</span> <span class="id" title="var">RC</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">einit</span>. <span class="id" title="var">ecofix</span> <span class="id" title="var">CIH</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">EQ</span> <span class="id" title="var">EQ'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a>, (<a class="idref" href="ITree.Eq.Eq.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a> <span class="id" title="var">ma'</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">EQ</span>; <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="ITree.Basics.Basics.html#fst_sum"><span class="id" title="definition">fst_sum</span></a> <span class="id" title="notation">&lt;$&gt;</span> <span class="id" title="var">ma</span>) <span class="id" title="var">eqn</span>: <span class="id" title="var">P</span>; <span class="id" title="var">remember</span> (<a class="idref" href="ITree.Basics.Basics.html#fst_sum"><span class="id" title="definition">fst_sum</span></a> <span class="id" title="notation">&lt;$&gt;</span> <span class="id" title="var">ma'</span>) <span class="id" title="var">eqn</span>: <span class="id" title="var">P'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Q</span>: <a class="idref" href="ITree.Basics.Basics.html#fst_sum"><span class="id" title="definition">fst_sum</span></a> <span class="id" title="notation">&lt;$&gt;</span> <span class="id" title="var">ma</span> <a class="idref" href="ITree.Eq.Eq.html#7123c605943b5e01235e17fe532efcae"><span class="id" title="notation">≅</span></a> <span class="id" title="var">i</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">reflexivity</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Q'</span>: <a class="idref" href="ITree.Basics.Basics.html#fst_sum"><span class="id" title="definition">fst_sum</span></a> <span class="id" title="notation">&lt;$&gt;</span> <span class="id" title="var">ma'</span> <a class="idref" href="ITree.Eq.Eq.html#7123c605943b5e01235e17fe532efcae"><span class="id" title="notation">≅</span></a> <span class="id" title="var">i0</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">reflexivity</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">P</span> <span class="id" title="var">P'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">genobs</span> <span class="id" title="var">i</span> <span class="id" title="var">ot</span>; <span class="id" title="var">genobs</span> <span class="id" title="var">i0</span> <span class="id" title="var">os</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">hinduction</span> <span class="id" title="var">EQ</span> <span class="id" title="keyword">before</span> <span class="id" title="var">CIHH</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="var">pclearbot</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>; <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#observe_eutt"><span class="id" title="lemma">observe_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>, <span class="id" title="var">Heqos</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="method">fmap</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Q</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Q'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eq.html#eqit_inv_bind_ret"><span class="id" title="lemma">eqit_inv_bind_ret</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>, <span class="id" title="var">Heqos</span>. <span class="id" title="var">crunch</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>, <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ'</span>. <span class="id" title="var">efinal</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>, <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eq.html#eqit_inv"><span class="id" title="lemma">eqit_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>, <span class="id" title="var">H2</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.map"><span class="id" title="definition">ITree.map</span></a> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">rewrite</span>! <a class="idref" href="ITree.Eq.Eq.html#bind_ret_l"><span class="id" title="lemma">Eq.bind_ret_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eq.html#eqit_inv"><span class="id" title="lemma">eqit_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ'</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">REL</span>. <span class="id" title="var">inv</span> <span class="id" title="var">EQ'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span> : <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Basics.Basics.html#fst_sum"><span class="id" title="definition">fst_sum</span></a>, <a class="idref" href="ITree.Basics.Basics.html#snd_sum"><span class="id" title="definition">snd_sum</span></a> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">destruct</span> <span class="id" title="var">x0</span> <span class="id" title="var">eqn</span>: <span class="id" title="var">Hx0</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span> <span class="id" title="var">eqn</span>: <span class="id" title="var">Hx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span> : <span class="id" title="tactic">repeat</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="var">inv</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="var">inv</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span> : <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eq.html#eqit_Ret"><span class="id" title="lemma">eqit_Ret</span></a>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">EQ'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">p0</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>, <span class="id" title="var">Heqos</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#observe_eqitree"><span class="id" title="lemma">observe_eqitree</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>, <span class="id" title="var">Heqos</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="method">fmap</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>, <span class="id" title="var">Heqos</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Q</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Q'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eq.html#eqitree_inv_bind_tau"><span class="id" title="lemma">eqitree_inv_bind_tau</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>. <span class="id" title="var">crunch</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2 : { <span class="id" title="var">punfold</span> <span class="id" title="var">H0</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H0</span>. <span class="id" title="var">inv</span> <span class="id" title="var">CHECK</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eq.html#eqitree_inv_bind_tau"><span class="id" title="lemma">eqitree_inv_bind_tau</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>. <span class="id" title="var">crunch</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2 : { <span class="id" title="var">punfold</span> <span class="id" title="var">H2</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H2</span>. <span class="id" title="var">inv</span> <span class="id" title="var">CHECK</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>, <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">estep</span>; <span class="id" title="var">ebase</span>; <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIHL</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>, <span class="id" title="var">H2</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>, <span class="id" title="var">H1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ'</span>. <span class="id" title="tactic">rewrite</span>!<a class="idref" href="ITree.Eq.Eq.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ'</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>, <span class="id" title="var">Heqos</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#observe_eqitree"><span class="id" title="lemma">observe_eqitree</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>, <span class="id" title="var">Heqos</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">Heqot</span> <span class="id" title="var">into</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">Heqos</span> <span class="id" title="var">into</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Q</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Q'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eq.html#eqitree_inv_bind_vis"><span class="id" title="lemma">eqitree_inv_bind_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="var">crunch</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2 : { <span class="id" title="var">punfold</span> <span class="id" title="var">H1</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H1</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eq.html#eqitree_inv_bind_vis"><span class="id" title="lemma">eqitree_inv_bind_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="var">crunch</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2 : { <span class="id" title="var">punfold</span> <span class="id" title="var">H2</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H2</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>, <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Eq.UpToTaus.html#euttG_vis"><span class="id" title="lemma">euttG_vis</span></a>; <span class="id" title="var">ebase</span>; <span class="id" title="tactic">left</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">CIHH</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <span class="id" title="method">fmap</span>. <span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>, <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="method">fmap</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ'</span>. <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#bind_vis"><span class="id" title="lemma">bind_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Eq.Eq.html#eqit_inv_Vis"><span class="id" title="lemma">eqit_inv_Vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ'</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *. <span class="id" title="var">crunch</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">REL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>, <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ'</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="method">fmap</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ'</span>. <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#bind_vis"><span class="id" title="lemma">bind_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Eq.Eq.html#eqit_inv_Vis"><span class="id" title="lemma">eqit_inv_Vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ'</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">ma</span>) <span class="id" title="var">eqn</span> : <span class="id" title="var">Hma</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#observe_eqitree"><span class="id" title="lemma">observe_eqitree</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hma</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hma</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#observe_eqitree"><span class="id" title="lemma">observe_eqitree</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="method">fmap</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Q</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hma</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>. <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#bind_ret_l"><span class="id" title="lemma">Eq.bind_ret_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">Heqot</span>. <span class="id" title="var">inv</span> <span class="id" title="var">Heqot</span>. <span class="id" title="var">inv</span> <span class="id" title="var">CHECK0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#tau_euttge"><span class="id" title="lemma">tau_euttge</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHEQ</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#observe_eqitree"><span class="id" title="lemma">observe_eqitree</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hma</span>, <span class="id" title="var">Heqot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="method">fmap</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Q</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hma</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>. <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#bind_tau"><span class="id" title="lemma">bind_tau</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="ITree.Eq.Eq.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="var">t</span>). <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hma</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#observe_eqitree"><span class="id" title="lemma">observe_eqitree</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hma</span>. <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#observe_eqitree"><span class="id" title="lemma">observe_eqitree</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqot</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Q</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hma</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="method">fmap</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Q</span>. <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#bind_tau"><span class="id" title="lemma">bind_tau</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#eqitree_Tau"><span class="id" title="lemma">eqitree_Tau</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Q</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#observe_eqitree"><span class="id" title="lemma">observe_eqitree</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hma</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hma</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#observe_eqitree"><span class="id" title="lemma">observe_eqitree</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="method">fmap</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Q</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hma</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>. <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#bind_vis"><span class="id" title="lemma">bind_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">Heqot</span>. <span class="id" title="var">inv</span> <span class="id" title="var">Heqot</span>. <span class="id" title="var">inv</span> <span class="id" title="var">CHECK0</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">ma'</span>) <span class="id" title="var">eqn</span> : <span class="id" title="var">Hma</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#observe_eqitree"><span class="id" title="lemma">observe_eqitree</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hma</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hma</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#observe_eqitree"><span class="id" title="lemma">observe_eqitree</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="method">fmap</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Q'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hma</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>. <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#bind_ret_l"><span class="id" title="lemma">Eq.bind_ret_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">Heqos</span>. <span class="id" title="var">inv</span> <span class="id" title="var">Heqos</span>. <span class="id" title="var">inv</span> <span class="id" title="var">CHECK0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#tau_euttge"><span class="id" title="lemma">tau_euttge</span></a>. <span class="id" title="tactic">rewrite</span> (<a class="idref" href="ITree.Eq.Eq.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a> <span class="id" title="var">t</span>). <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHEQ</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#observe_eqitree"><span class="id" title="lemma">observe_eqitree</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hma</span>, <span class="id" title="var">Heqos</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="method">fmap</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Q'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hma</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>. <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#bind_tau"><span class="id" title="lemma">bind_tau</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="ITree.Eq.Eq.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="var">t</span>). <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hma</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#observe_eqitree"><span class="id" title="lemma">observe_eqitree</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hma</span>. <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#observe_eqitree"><span class="id" title="lemma">observe_eqitree</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqos</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Q'</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hma</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Q'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="method">fmap</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Q'</span>. <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#bind_tau"><span class="id" title="lemma">bind_tau</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Q'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#eqitree_Tau"><span class="id" title="lemma">eqitree_Tau</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Q'</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#observe_eqitree"><span class="id" title="lemma">observe_eqitree</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hma</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hma</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#observe_eqitree"><span class="id" title="lemma">observe_eqitree</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="method">fmap</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Q'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hma</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>. <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#bind_vis"><span class="id" title="lemma">bind_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqos</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">Heqos</span>. <span class="id" title="var">inv</span> <span class="id" title="var">Heqos</span>. <span class="id" title="var">inv</span> <span class="id" title="var">CHECK0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="eqmR_transport_Equiv_itree" class="idref" href="#eqmR_transport_Equiv_itree"><span class="id" title="instance">eqmR_transport_Equiv_itree</span></a> {<a id="E:240" class="idref" href="#E:240"><span class="id" title="binder">E</span></a>} : <a class="idref" href="ITree.EqmR.EqmRMonad.html#TransportEquiv"><span class="id" title="class">TransportEquiv</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:240"><span class="id" title="variable">E</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">intro</span>. <span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>]<br/>
<span class="id" title="keyword">Instance</span> <a id="transport_refl" class="idref" href="#transport_refl"><span class="id" title="instance">transport_refl</span></a> {<a id="E:241" class="idref" href="#E:241"><span class="id" title="binder">E</span></a>} :<a class="idref" href="ITree.EqmR.EqmRMonad.html#TransportReflexive"><span class="id" title="class">TransportReflexive</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:241"><span class="id" title="variable">E</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
#[<span class="id" title="var">global</span>]<br/>
<span class="id" title="keyword">Instance</span> <a id="transport_symm" class="idref" href="#transport_symm"><span class="id" title="instance">transport_symm</span></a> {<a id="E:242" class="idref" href="#E:242"><span class="id" title="binder">E</span></a>} : <a class="idref" href="ITree.EqmR.EqmRMonad.html#TransportSymmetric"><span class="id" title="class">TransportSymmetric</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:242"><span class="id" title="variable">E</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
#[<span class="id" title="var">global</span>]<br/>
<span class="id" title="keyword">Instance</span> <a id="transport_trans" class="idref" href="#transport_trans"><span class="id" title="instance">transport_trans</span></a> {<a id="E:243" class="idref" href="#E:243"><span class="id" title="binder">E</span></a>} : <a class="idref" href="ITree.EqmR.EqmRMonad.html#TransportTransitive"><span class="id" title="class">TransportTransitive</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:243"><span class="id" title="variable">E</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">intro</span>. <span class="id" title="var">etransitivity</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="EqmR_OK_ITree" class="idref" href="#EqmR_OK_ITree"><span class="id" title="instance">EqmR_OK_ITree</span></a> {<a id="E:244" class="idref" href="#E:244"><span class="id" title="binder">E</span></a>} : <a class="idref" href="ITree.EqmR.EqmRMonad.html#EqmR_OK"><span class="id" title="class">EqmR_OK</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:244"><span class="id" title="variable">E</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.EqmR.EqmRMonad.html#eqmR"><span class="id" title="method">eqmR</span></a>, <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#EqmR_ITree"><span class="id" title="instance">EqmR_ITree</span></a>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>]<br/>
<span class="id" title="keyword">Instance</span> <a id="eqmR_bind_ProperH_ITree" class="idref" href="#eqmR_bind_ProperH_ITree"><span class="id" title="instance">eqmR_bind_ProperH_ITree</span></a> {<a id="E:245" class="idref" href="#E:245"><span class="id" title="binder">E</span></a>}: <a class="idref" href="ITree.EqmR.EqmRMonad.html#ProperBind"><span class="id" title="class">ProperBind</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:245"><span class="id" title="variable">E</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.EqmR.EqmRMonad.html#eqmR_rel_comp"><span class="id" title="method">eqmR_rel_comp</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. 2 : <span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. 3 : <span class="id" title="tactic">exact</span> (<span class="id" title="keyword">fun</span> <a id="a1:248" class="idref" href="#a1:248"><span class="id" title="binder">a1</span></a> <a id="a2:249" class="idref" href="#a2:249"><span class="id" title="binder">a2</span></a> =&gt; <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a1:246"><span class="id" title="variable">a1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a2:247"><span class="id" title="variable">a2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#a1:246"><span class="id" title="variable">a1</span></a> <a class="idref" href="ITree.EqmR.EqmRMonad.html#91e97f679796ae2f33b88d366e97515d"><span class="id" title="notation">∈</span></a> <span class="id" title="var">ma2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Eq.Eq.html#eutt_clo_bind"><span class="id" title="lemma">eutt_clo_bind</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#mayRet_eq_Refl_ITree"><span class="id" title="lemma">mayRet_eq_Refl_ITree</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span> <span class="id" title="keyword">as</span> (? &amp; ? &amp; ?). <span class="id" title="tactic">destruct</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>]<br/>
<span class="id" title="keyword">Instance</span> <a id="bind_ret_l_ITree" class="idref" href="#bind_ret_l_ITree"><span class="id" title="instance">bind_ret_l_ITree</span></a> {<a id="E:250" class="idref" href="#E:250"><span class="id" title="binder">E</span></a>}: <a class="idref" href="ITree.EqmR.EqmRMonad.html#BindRetL"><span class="id" title="class">BindRetL</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:250"><span class="id" title="variable">E</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">red</span>. <span class="id" title="tactic">intros</span> *. <span class="id" title="tactic">red</span>. <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#bind_ret_l"><span class="id" title="lemma">Eq.bind_ret_l</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>]<br/>
<span class="id" title="keyword">Instance</span> <a id="bind_ret_r_ITree" class="idref" href="#bind_ret_r_ITree"><span class="id" title="instance">bind_ret_r_ITree</span></a> {<a id="E:251" class="idref" href="#E:251"><span class="id" title="binder">E</span></a>}: <a class="idref" href="ITree.EqmR.EqmRMonad.html#BindRetR"><span class="id" title="class">BindRetR</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:251"><span class="id" title="variable">E</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">red</span>. <span class="id" title="tactic">intros</span> *. <span class="id" title="tactic">red</span>. <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#bind_ret_r"><span class="id" title="lemma">Eq.bind_ret_r</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>]<br/>
<span class="id" title="keyword">Instance</span> <a id="bind_bind_ITree" class="idref" href="#bind_bind_ITree"><span class="id" title="instance">bind_bind_ITree</span></a> {<a id="E:252" class="idref" href="#E:252"><span class="id" title="binder">E</span></a>}: <a class="idref" href="ITree.EqmR.EqmRMonad.html#BindBind"><span class="id" title="class">BindBind</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:252"><span class="id" title="variable">E</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">red</span>. <span class="id" title="tactic">intros</span> *. <span class="id" title="tactic">red</span>. <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#bind_bind"><span class="id" title="lemma">Eq.bind_bind</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>]<br/>
<span class="id" title="keyword">Instance</span> <a id="eqmR_ret_ITree" class="idref" href="#eqmR_ret_ITree"><span class="id" title="instance">eqmR_ret_ITree</span></a> {<a id="E:253" class="idref" href="#E:253"><span class="id" title="binder">E</span></a>}: <a class="idref" href="ITree.EqmR.EqmRMonad.html#RetFinal"><span class="id" title="class">RetFinal</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:253"><span class="id" title="variable">E</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">red</span>. <span class="id" title="tactic">intros</span> *. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eq.html#eqit_Ret"><span class="id" title="lemma">eqit_Ret</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="EqmRMonad_ITree" class="idref" href="#EqmRMonad_ITree"><span class="id" title="instance">EqmRMonad_ITree</span></a> {<a id="E:254" class="idref" href="#E:254"><span class="id" title="binder">E</span></a>} : <a class="idref" href="ITree.EqmR.EqmRMonad.html#EqmRMonadLaws"><span class="id" title="class">EqmRMonadLaws</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:254"><span class="id" title="variable">E</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#image_ma_Refl_ITree"><span class="id" title="lemma">image_ma_Refl_ITree</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>]<br/>
<span class="id" title="keyword">Instance</span> <a id="eqmR_ret_inv_itree" class="idref" href="#eqmR_ret_inv_itree"><span class="id" title="instance">eqmR_ret_inv_itree</span></a> {<a id="E:255" class="idref" href="#E:255"><span class="id" title="binder">E</span></a>}: <a class="idref" href="ITree.EqmR.EqmRMonad.html#RetInv"><span class="id" title="class">RetInv</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:255"><span class="id" title="variable">E</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">red</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Eq.Eq.html#eqit_inv_Ret"><span class="id" title="lemma">eqit_inv_Ret</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>]<br/>
<span class="id" title="keyword">Instance</span> <a id="mayRet_bind_inv_itree" class="idref" href="#mayRet_bind_inv_itree"><span class="id" title="instance">mayRet_bind_inv_itree</span></a> {<a id="E:256" class="idref" href="#E:256"><span class="id" title="binder">E</span></a>}: <a class="idref" href="ITree.EqmR.EqmRMonad.html#MayRetBindInv"><span class="id" title="class">MayRetBindInv</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:256"><span class="id" title="variable">E</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns_mayRet"><span class="id" title="lemma">Returns_mayRet</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a id="x:258" class="idref" href="#x:258"><span class="id" title="binder">x</span></a> <span class="id" title="notation">&lt;-</span> <span class="id" title="var">ma</span><span class="id" title="notation">;;</span> <span class="id" title="var">k</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#x:257"><span class="id" title="variable">x</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">i</span> <a class="idref" href="ITree.Eq.Eq.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a id="x:260" class="idref" href="#x:260"><span class="id" title="binder">x</span></a> <span class="id" title="notation">&lt;-</span> <span class="id" title="var">ma</span> <span class="id" title="notation">;;</span> <span class="id" title="var">k</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#x:259"><span class="id" title="variable">x</span></a>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">reflexivity</span>). <span class="id" title="tactic">clear</span> <span class="id" title="var">Heqi</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">ma</span> <span class="id" title="var">k</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eq.html#eutt_inv_bind_ret"><span class="id" title="lemma">eutt_inv_bind_ret</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">crunch</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">rewrite</span>! <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns_mayRet"><span class="id" title="lemma">Returns_mayRet</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>|<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span>]; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eq.html#eutt_inv_bind_tau"><span class="id" title="lemma">eutt_inv_bind_tau</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>; <span class="id" title="var">crunch</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">edestruct</span> <span class="id" title="var">IHReturns</span>; <span class="id" title="var">cycle</span> 1; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#bind_tau"><span class="id" title="lemma">bind_tau</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">edestruct</span> <span class="id" title="var">IHReturns</span>; <span class="id" title="var">cycle</span> 1; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H2</span>. <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eq.html#bind_ret_l"><span class="id" title="lemma">Eq.bind_ret_l</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eq.html#eutt_inv_bind_vis"><span class="id" title="lemma">eutt_inv_bind_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>; <span class="id" title="var">crunch</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">edestruct</span> <span class="id" title="var">IHReturns</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H1</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Eq.Eq.html#eutt_clo_bind"><span class="id" title="lemma">eutt_clo_bind</span></a>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">crunch</span>; <span class="id" title="var">esplit</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns_mayRet"><span class="id" title="lemma">Returns_mayRet</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ReturnsVis"><span class="id" title="constructor">ReturnsVis</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns_mayRet"><span class="id" title="lemma">Returns_mayRet</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> <span class="id" title="var">x0</span>. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns_mayRet"><span class="id" title="lemma">Returns_mayRet</span></a>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#ReturnsVis"><span class="id" title="constructor">ReturnsVis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#Returns_mayRet"><span class="id" title="lemma">Returns_mayRet</span></a>. <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>]<br/>
<span class="id" title="keyword">Instance</span> <a id="fmap_inv_mayRet_itree" class="idref" href="#fmap_inv_mayRet_itree"><span class="id" title="instance">fmap_inv_mayRet_itree</span></a> {<a id="E:261" class="idref" href="#E:261"><span class="id" title="binder">E</span></a>}: <a class="idref" href="ITree.EqmR.EqmRMonad.html#FmapInvRet"><span class="id" title="class">FmapInvRet</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:261"><span class="id" title="variable">E</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">red</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="method">fmap</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#eutt_bind_inv_homog"><span class="id" title="lemma">eutt_bind_inv_homog</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>]<br/>
<span class="id" title="keyword">Instance</span> <a id="eqmR_inv_itree" class="idref" href="#eqmR_inv_itree"><span class="id" title="instance">eqmR_inv_itree</span></a> {<a id="E:262" class="idref" href="#E:262"><span class="id" title="binder">E</span></a>}: <a class="idref" href="ITree.EqmR.EqmRMonad.html#EqmRInv"><span class="id" title="class">EqmRInv</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:262"><span class="id" title="variable">E</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="ITree.Eq.Eq.html#bind_ret_r"><span class="id" title="lemma">Eq.bind_ret_r</span></a> <span class="id" title="var">ma</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> @<a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#eutt_bind_inv_homog"><span class="id" title="lemma">eutt_bind_inv_homog</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Eq.Eq.html#eqit_inv"><span class="id" title="lemma">eqit_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="EqmRMonadInverses_ITree" class="idref" href="#EqmRMonadInverses_ITree"><span class="id" title="instance">EqmRMonadInverses_ITree</span></a> {<a id="E:263" class="idref" href="#E:263"><span class="id" title="binder">E</span></a>} : <a class="idref" href="ITree.EqmR.EqmRMonad.html#EqmRInversionProperties"><span class="id" title="class">EqmRInversionProperties</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:263"><span class="id" title="variable">E</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>;<span class="id" title="tactic">try</span> <span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="EQM_ITree" class="idref" href="#EQM_ITree"><span class="id" title="instance">EQM_ITree</span></a> {<a id="E:264" class="idref" href="#E:264"><span class="id" title="binder">E</span></a>} : <a class="idref" href="ITree.EqmR.EqmRMonad.html#EQM"><span class="id" title="class">EQM</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.EqmR.Monads.ITree_weak.html#E:264"><span class="id" title="variable">E</span></a>) <span class="id" title="var">_</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>;<span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
